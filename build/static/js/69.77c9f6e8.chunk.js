(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[69],{1143:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return W}));var c=n(7),a=n(0),o=n(21),i=n(750),l=n(342),s=n(745),r=n(222),d=n(65),u=n(223),b=n(746),j=n(747),h=n(748),v=n(113),O=n(749),f=n(158),p=n(742),y=n(346),m=n(738),g=n(26),x=n(288),k=n.n(x),N=n(97),S=n.n(N),C=n(62),D=n(54),q=n(950),T=n(43),E=n(85),A=n(34),P=n(38),w=n(64),I=n.n(w),U=n(740),M=n(898),z=n(741),L=n(899),R=n(20),F=n(343),Q=n(900),V=n(119),B=n(140),G=n(1),J=P.d({quantity:P.f("Enter stock quantity").required("Stock quantity is required")});function K(t){var e=t.open,n=t.close,c=t.isEditData,a=Object(B.a)(),i=Object(o.b)(),l={quantity:(null===c||void 0===c?void 0:c.totalQuantity)||""},s=Object(T.f)({mode:"onChange",resolver:Object(E.a)(J),defaultValues:l}),r=s.handleSubmit;return Object(G.jsx)("div",{children:Object(G.jsxs)(U.a,{open:e,classes:{paper:a.dialog},children:[Object(G.jsx)(M.a,{className:a.dialogTitle,children:Object(G.jsxs)("div",{className:a.dialogTitleChild,children:[Object(G.jsx)(f.a,{style:{fontSize:"20px"},children:" Update library stock quantity"}),Object(G.jsx)(z.a,{to:"#",onClick:n,children:Object(G.jsx)(I.a,{className:a.closeIcon})})]})}),Object(G.jsxs)(A.a,{methods:s,onSubmit:r((function(t){i(Object(q.d)(null===c||void 0===c?void 0:c.bookId,null===t||void 0===t?void 0:t.quantity,(function(){i(Object(q.c)()),n()})))})),children:[Object(G.jsx)(L.a,{children:Object(G.jsx)(R.a,{container:!0,spacing:2,children:Object(G.jsxs)(R.a,{item:!0,xs:12,sm:12,children:[Object(G.jsxs)("label",{className:a.label,children:["Increment or decrement library stock quantity",Object(G.jsx)("span",{className:a.mandatory,children:"*"})]}),Object(G.jsx)(A.d,{name:"quantity",placeholder:"Add stock quantity",className:a.textField})]})})}),Object(G.jsx)(F.a,{style:{marginTop:15}}),Object(G.jsxs)(Q.a,{className:a.dialogAction,children:[Object(G.jsx)(V.a,{variant:"outlined",color:"primary",className:a.buttonCancel,onClick:n,children:"Close"}),Object(G.jsx)(V.a,{variant:"contained",color:"primary",type:"submit",className:a.buttonSubmit,children:c?"Update":"Add"})]})]})]})})}var H=n(46),_=Object(i.a)((function(t){return{root:{"&:nth-of-type(even)":{backgroundColor:t.palette.action.hover}}}}))(s.a);function W(){var t=Object(C.a)();Object(H.a)({roleList:["ADMIN","SUPER_ADMIN"]});var e=Object(o.b)(),n=Object(l.a)(),i=Object(a.useState)(0),s=Object(c.a)(i,2),x=s[0],N=s[1],T=Object(a.useState)(25),E=Object(c.a)(T,2),A=E[0],P=E[1],w=Object(a.useState)(null),I=Object(c.a)(w,2),U=I[0],M=I[1],z=Object(a.useState)(!1),L=Object(c.a)(z,2),R=L[0],F=L[1],Q=Object(a.useState)(""),V=Object(c.a)(Q,2),B=V[0],J=V[1],W=Object(o.c)((function(t){return null===t||void 0===t?void 0:t.stock})).libraryStockData,X=null===W||void 0===W?void 0:W.content,Y=null===W||void 0===W?void 0:W.totalElements;return Object(a.useEffect)((function(){e(Object(q.c)(B||"",x+1,A))}),[B,x,A]),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(D.a,{children:[Object(G.jsxs)("div",{className:t.titleContainer,children:[Object(G.jsx)(S.a,{className:t.viewIcon}),Object(G.jsx)("span",{className:t.pageTitle,children:" \xa0 Library Stock "})]}),Object(G.jsxs)(r.a,{elevation:5,className:t.root,children:[Object(G.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(G.jsx)(d.a,{className:t.searchControl,id:"input-search-header",placeholder:"Search",onChange:function(t){return function(t){J(t.target.value)}(t)},startAdornment:Object(G.jsx)(u.a,{position:"start",children:Object(G.jsx)(g.U,{stroke:1.5,size:"1rem",className:t.startAdornment})})})}),Object(G.jsx)(b.a,{className:t.tableContainer,children:Object(G.jsxs)(j.a,{className:t.table,"aria-label":"simple table",children:[Object(G.jsx)(h.a,{className:t.tableHeaderCell,children:Object(G.jsxs)(_,{children:[Object(G.jsx)(v.a,{children:" Cover "}),Object(G.jsx)(v.a,{children:" Name "}),Object(G.jsx)(v.a,{children:" Author "}),Object(G.jsx)(v.a,{children:" Isbn "}),Object(G.jsx)(v.a,{children:" Total quantity "}),Object(G.jsx)(v.a,{children:" Available quantity "}),Object(G.jsx)(v.a,{align:"center",children:" Status "}),Object(G.jsx)(v.a,{align:"right",children:" Action "})]})}),X?Object(G.jsx)(O.a,{children:null===X||void 0===X?void 0:X.map((function(e){var c,a,o,i,l,s,r,d;return Object(G.jsxs)(_,{children:[Object(G.jsx)(v.a,{children:Object(G.jsx)("img",{src:null===e||void 0===e||null===(c=e.bookDetail)||void 0===c||null===(a=c.imageUrls)||void 0===a?void 0:a[0],alt:"",width:"60px",height:100,style:{objectFit:"contain"}})}),Object(G.jsxs)(v.a,{children:[" ",(null===e||void 0===e||null===(o=e.bookDetail)||void 0===o?void 0:o.title)||"-"," "]}),Object(G.jsxs)(v.a,{children:[" ",(null===e||void 0===e||null===(i=e.bookDetail)||void 0===i?void 0:i.author)||"-"," "]}),Object(G.jsxs)(v.a,{children:[" ",(null===e||void 0===e||null===(l=e.bookDetail)||void 0===l?void 0:l.isbn)||"-"," "]}),Object(G.jsxs)(v.a,{align:"center",children:[" ",e.totalQuantity," "]}),Object(G.jsxs)(v.a,{align:"center",children:[" ",e.availableQuantity]}),Object(G.jsx)(v.a,{align:"center",children:Object(G.jsx)(f.a,{className:t.status,style:{backgroundColor:"ACTIVE"===(null===e||void 0===e||null===(s=e.bookDetail)||void 0===s?void 0:s.status)&&n.palette.success.main||"INACTIVE"===(null===e||void 0===e||null===(r=e.bookDetail)||void 0===r?void 0:r.status)&&n.palette.warning.dark},children:null===e||void 0===e||null===(d=e.bookDetail)||void 0===d?void 0:d.status})}),Object(G.jsx)(v.a,{align:"right",children:Object(G.jsx)(p.a,{title:"Edit Stock",children:Object(G.jsx)(y.a,{onClick:function(){return M(e),void F(!0)},children:Object(G.jsx)(k.a,{color:"primary",fontSize:"small",style:{cursor:"pointer"}})})})})]},e.id)}))}):Object(G.jsx)("caption",{style:{textAlign:"center"},children:" Sorry! No data available "})]})}),Object(G.jsx)(m.a,{rowsPerPageOptions:[25,50,100],component:"div",count:Y||0,rowsPerPage:A,page:x,onPageChange:function(t,e){N(e)},onRowsPerPageChange:function(t){P(+t.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),R&&Object(G.jsx)(K,{isEditData:U,open:R,close:function(){M(null),F(!1)}})]})})}},950:function(t,e,n){"use strict";n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return b})),n.d(e,"e",(function(){return j})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return O}));var c=n(11),a=n(5),o=n(9),i=function(t){return{type:a.ag,error:t}},l=function(t){return{type:a.Rf,error:t}},s=function(t){return{type:a.g,error:t}},r=function(t){return{type:a.he,error:t}},d=function(t){return{type:a.Lf,error:t}},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25;return function(s){s({type:a.bg});try{Object(c.a)("http://localhost:8102","GET","books-service/books/schools/".concat(t,"/total?searchKey=").concat(e,"&pageNumber=").concat(n,"&pageSize=").concat(l),!0).then((function(t){s(function(t){return{type:a.cg,payload:t}}({viewStockData:t}))})).catch((function(t){s(i(t)),s(Object(o.b)(null===t||void 0===t?void 0:t.message))}))}catch(r){s(i(null===r||void 0===r?void 0:r.message))}}},b=function(t,e,n){return function(a){try{Object(c.a)("http://localhost:8102","DELETE","books-service/books/".concat(t,"/schools/").concat(e,"/total"),!0).then((function(t){a(Object(o.b)(null!==t&&void 0!==t&&t.message?null===t||void 0===t?void 0:t.message:"Deleted Successfully")),n&&n(t)})).catch((function(t){var e;console.log(t),a(Object(o.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(i){console.log(i),a(Object(o.b)("Deleted Module Successfully"))}}},j=function(t,e,n,i){return function(s){s({type:a.Sf});try{Object(c.a)("http://localhost:8102","PUT","books-service/books/".concat(e,"/schools/").concat(n,"/total?quantity=").concat(t),!0).then((function(t){s(function(t){return{type:a.Tf,payload:t}}(t)),i&&i(t),s(Object(o.b)(null===t||void 0===t?void 0:t.message))})).catch((function(t){var e;console.log(t),s(l(t)),s(Object(o.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(r){s(l(null===r||void 0===r?void 0:r.message))}}},h=function(t,e,n,i){return function(l){l({type:a.h});try{Object(c.a)("http://localhost:8102","POST","books-service/books/".concat(e,"/schools/").concat(n,"/total?quantity=").concat(t),!0).then((function(t){l(function(t){return{type:a.i,payload:t}}(t)),i&&i(t)})).catch((function(t){var e;l(s(t)),l(Object(o.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(r){l(s(null===r||void 0===r?void 0:r.message))}}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return function(i){i({type:a.ie});try{Object(c.a)("http://localhost:8102","GET","books-service/books/total?searchKey=".concat(t,"&pageNumber=").concat(e,"&pageSize=").concat(n),!0).then((function(t){i(function(t){return{type:a.je,payload:t}}({libraryStockData:t}))})).catch((function(t){i(r(t)),i(Object(o.b)(null===t||void 0===t?void 0:t.message))}))}catch(l){i(r(null===l||void 0===l?void 0:l.message))}}},O=function(t,e,n){return function(i){i({type:a.Mf});try{var l=e>=0;Object(c.a)("http://localhost:8102","PUT","books-service/books/".concat(t,"/total/library-stock?quantity=").concat(e," "),!0).then((function(t){var e;i((e=t,{type:a.Nf,payload:e})),i(Object(o.b)("".concat(l?"Incremented":"Decremented"," successfully"))),n&&n(t)})).catch((function(t){var e;i(d(t)),i(Object(o.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(s){i(d(null===s||void 0===s?void 0:s.message))}}}}}]);
//# sourceMappingURL=69.77c9f6e8.chunk.js.map