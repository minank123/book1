(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[53],{943:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var c=n(11),a=n(9),i=n(5),s=function(e){return{type:i.Cb,error:e}},o=function(e,t,n){return function(i){try{Object(c.a)("https://prodservice.bookeinstein.com","POST","schools-service/schools/".concat(t,"/leaves"),e,!0).then((function(e){i(Object(a.b)(null===e||void 0===e?void 0:e.message)),n&&n(e)})).catch((function(e){var t;console.log(e),e.code,i(Object(a.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message))}))}catch(s){s.code}}},r=function(e,t,n){return function(i){try{Object(c.a)("https://prodservice.bookeinstein.com","PUT","schools-service/schools/leaves/".concat(t),e,!0).then((function(e){e&&(i(Object(a.b)(null===e||void 0===e?void 0:e.message)),n&&n(e))})).catch((function(e){var t;console.log(e),i(Object(a.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message))}))}catch(o){var s;i(Object(a.b)(null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)),console.log(o)}}},l=function(e,t){return function(n){try{Object(c.a)("https://prodservice.bookeinstein.com","DELETE","schools-service/schools/leaves/".concat(e),!0).then((function(e){n(Object(a.b)("Leave deleted successfully")),t&&t(e)})).catch((function(e){var t;n(Object(a.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),console.log(e)}))}catch(i){console.log(i)}}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(o,r){o({type:i.Db});try{Object(c.a)("https://prodservice.bookeinstein.com","GET","schools-service/schools/".concat(e,"/leaves?pageNumber=").concat(n,"&pageSize=").concat(t),!0).then((function(e){o(function(e){return{type:i.Eb,payload:e}}({allLeaves:e}))})).catch((function(e){o(s(e)),o(Object(a.b)(null===e||void 0===e?void 0:e.message))}))}catch(l){o(s("Something went wrong"))}}}},944:function(e,t,n){"use strict";var c=n(1105),a=n(1104),i=n(342),s=n(1);t.a=function(e){var t=e.isError,n=e.setError,o=e.message,r=Object(i.a)();return Object(s.jsx)(c.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:function(){return n(!1)},children:Object(s.jsx)(a.a,{onClose:function(){return n(!1)},severity:"error",style:{background:r.palette.error.dark,color:"#fff"},children:o})})}},966:function(e,t,n){"use strict";n.r(t);var c=n(16),a=n(4),i=n(28),s=n(7),o=n(0),r=n(21),l=n(943),d=n(64),j=n.n(d),b=n(43),u=n(38),O=n(85),h=n(34),v=n(349),p=n(944),x=n(740),m=n(898),f=n(158),g=n(741),D=n(899),y=n(20),N=n(343),E=n(900),C=n(119),S=n(140),k=n(1),w=u.d({title:u.f("Enter Title here").required("Title is required"),description:u.f("Enter Description here").required("Description is required"),startDate:u.f("Enter Start Date here").required("Start Date is required"),endDate:u.f("Enter End Date here").required("End Date is required")});function T(e){var t=e.isOpen,n=e.setOpen,a=e.isError,d=e.setError,u=e.isEditData,T=e.id,L=Object(S.a)(),P=Object(o.useState)(!1),A=Object(s.a)(P,2),q=A[0],I=(A[1],Object(r.b)()),F={title:(null===u||void 0===u?void 0:u.title)||"",description:(null===u||void 0===u?void 0:u.description)||"",startDate:(null===u||void 0===u?void 0:u.startDate)||"",endDate:(null===u||void 0===u?void 0:u.endDate)||""},M=Object(b.f)({mode:"onChange",resolver:Object(O.a)(w),defaultValues:F}),U=M.reset,z=M.handleSubmit,H=function(){n(!1),U()},R=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={title:null===t||void 0===t?void 0:t.title,description:null===t||void 0===t?void 0:t.description,startDate:null===t||void 0===t?void 0:t.startDate,endDate:null===t||void 0===t?void 0:t.endDate},u?(I(Object(l.d)(n,u.id,(function(){I(Object(l.c)(u.schoolId))}))),H()):(I(Object(l.a)(n,T,(function(){I(Object(l.c)(T))}))),H());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsxs)(x.a,{open:t,onClose:function(e,t){"backdropClick"!==t&&H()},classes:{paper:L.dialog},children:[Object(k.jsx)(m.a,{className:L.dialogTitle,children:Object(k.jsxs)("div",{className:L.dialogTitleChild,children:[Object(k.jsx)(f.a,{style:{fontSize:"20px"},children:u?"Update Leave":"Add Leave"}),Object(k.jsx)(g.a,{to:"#",onClick:H,children:Object(k.jsx)(j.a,{className:L.closeIcon})})]})}),Object(k.jsxs)(h.a,{methods:M,onSubmit:z(R),children:[Object(k.jsx)(D.a,{children:Object(k.jsxs)(y.a,{container:!0,children:[Object(k.jsxs)(y.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{children:["Title ",Object(k.jsx)("span",{className:L.mandatory,children:"*"})]}),Object(k.jsx)(h.d,{name:"title",placeholder:"Title here",autoFocus:!0}),Object(k.jsx)("br",{})," ",Object(k.jsx)("br",{})]}),Object(k.jsxs)(y.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{children:["Description ",Object(k.jsx)("span",{className:L.mandatory,children:"*"})]}),Object(k.jsx)(h.d,{name:"description",placeholder:"Description here",className:L.textField})," ",Object(k.jsx)("br",{})," ",Object(k.jsx)("br",{})]}),Object(k.jsxs)(y.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{className:L.label,children:["Start Date ",Object(k.jsx)("span",{className:L.mandatory,children:"*"})]}),Object(k.jsx)(h.d,{type:"date",name:"startDate",placeholder:"Start Date",className:L.textField})," ",Object(k.jsx)("br",{})," ",Object(k.jsx)("br",{})]}),Object(k.jsxs)(y.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{className:L.label,children:["End Date ",Object(k.jsx)("span",{className:L.mandatory,children:"*"})]}),Object(k.jsx)(h.d,{type:"date",name:"endDate",placeholder:"End Date",className:L.textField})]})]})}),Object(k.jsx)(N.a,{style:{marginTop:15}}),Object(k.jsxs)(E.a,{className:L.dialogAction,children:[Object(k.jsx)(C.a,{variant:"outlined",color:"secondary",className:L.buttonCancel,onClick:H,children:"Close"}),Object(k.jsx)(C.a,{variant:"contained",type:"submit",className:L.buttonSubmit,children:u?"Update":"Add"})]})]})]}),Object(k.jsx)("span",{className:L.loader,children:q?Object(v.a)():""}),Object(k.jsx)(p.a,{isError:a,setError:d,message:"Something went wrong !"})]})}var L=n(750),P=n(745),A=n(222),q=n(746),I=n(747),F=n(748),M=n(113),U=n(749),z=n(346),H=n(738),R=n(288),B=n.n(R),J=n(289),_=n.n(J),G=n(290),V=n.n(G),K=n(97),Q=n.n(K),W=n(62),X=n(173),Y=n(46),Z=Object(L.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(P.a);t.default=function(e){var t=Object(W.a)();Object(Y.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var n=Object(r.b)(),d=Object(o.useState)(0),j=Object(s.a)(d,2),b=j[0],u=j[1],O=Object(o.useState)(25),h=Object(s.a)(O,2),v=h[0],p=h[1],x=Object(o.useState)(!1),m=Object(s.a)(x,2),f=m[0],g=m[1],D=Object(o.useState)({isOpen:!1,title:"",subTitle:""}),y=Object(s.a)(D,2),N=y[0],E=y[1],S=Object(o.useState)(null),w=Object(s.a)(S,2),L=w[0],P=w[1],R=Object(r.c)((function(e){return null===e||void 0===e?void 0:e.leave})).allLeaves,J=null===R||void 0===R?void 0:R.content,G=function(){var t=Object(i.a)(Object(c.a)().mark((function t(i){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(l.b)(i,(function(){n(Object(l.c)(null===e||void 0===e?void 0:e.id,v,b+1))}))),E(Object(a.a)(Object(a.a)({},N),{},{isOpen:!1}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){n(Object(l.c)(null===e||void 0===e?void 0:e.id,v,b+1))}),[null===e||void 0===e?void 0:e.id,v,b]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:t.titleContainer,children:[Object(k.jsx)(Q.a,{className:t.viewIcon}),Object(k.jsx)("span",{className:t.pageTitle,children:"\xa0 Schools Leaves "})]}),Object(k.jsxs)(A.a,{elevation:5,className:t.root,children:[Object(k.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(k.jsxs)(C.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9"},onClick:function(){g(!0),P(null)},children:[Object(k.jsx)(V.a,{})," Leaves"]})}),Object(k.jsx)(q.a,{className:t.tableContainer,children:Object(k.jsxs)(I.a,{className:t.table,"aria-label":"simple table",children:[Object(k.jsx)(F.a,{className:t.tableHeaderCell,children:Object(k.jsxs)(Z,{children:[Object(k.jsx)(M.a,{children:" Title "}),Object(k.jsx)(M.a,{children:" Description "}),Object(k.jsx)(M.a,{children:" Start Date "}),Object(k.jsx)(M.a,{children:" End Date "}),Object(k.jsx)(M.a,{align:"right",children:" Action "})]})}),J?Object(k.jsx)(U.a,{children:null===J||void 0===J?void 0:J.map((function(e,t){return Object(k.jsxs)(Z,{children:[Object(k.jsxs)(M.a,{children:[" ",e.title," "]}),Object(k.jsxs)(M.a,{children:[" ",e.description," "]}),Object(k.jsxs)(M.a,{children:[" ",e.startDate," "]}),Object(k.jsxs)(M.a,{children:[" ",e.endDate," "]}),Object(k.jsxs)(M.a,{align:"right",children:[Object(k.jsx)(z.a,{style:{cursor:"pointer"},onClick:function(){return t=e,g(!0),void P(t);var t},children:Object(k.jsx)(B.a,{color:"primary"})}),Object(k.jsx)(z.a,{onClick:function(){E({isOpen:!0,title:"Delete Leave",subTitle:"Are you sure you want to delete this school leave.",onConfirm:function(){G(e.id)}})},children:Object(k.jsx)(_.a,{color:"error",style:{cursor:"pointer"}})})]})]},t)}))}):Object(k.jsx)("caption",{style:{textAlign:"center"},children:"Sorry! No data available"})]})}),Object(k.jsx)(H.a,{rowsPerPageOptions:[25,50,100],component:"div",count:(null===R||void 0===R?void 0:R.totalElements)||0,rowsPerPage:v,page:b,onPageChange:function(e,t){u(t)},onRowsPerPageChange:function(e){p(+e.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),f&&Object(k.jsx)(T,{isOpen:f,setOpen:g,id:e.id,isEditData:L}),N&&Object(k.jsx)(X.a,{confirmDialog:N,setConfirmDialog:E})]})}}}]);
//# sourceMappingURL=53.60c4d771.chunk.js.map