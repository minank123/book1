(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[96],{1111:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ie}));var a=n(24),c=n(16),r=n(28),i=n(7),s=n(0),o=n(38),l=n(178),u=n.n(l),d=n(54),j=n(21),b=n(750),O=n(43),h=n(85),v=n(745),p=n(222),f=n(20),x=n(65),g=n(223),m=n(474),k=n(119),S=n(477),w=n(746),y=n(747),C=n(748),D=n(113),I=n(749),N=n(742),P=n(346),A=n(738),T=n(26),B=n(96),M=n.n(B),V=n(62),z=n(40),E=n(46),q=n(29),L=n.n(q),R=n(42),Y=n.n(R),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new Promise((function(c,r){Y.a.get("".concat("https://prodservice.bookeinstein.com","/orders-service/delivery-plans/deliveryDate?deliveryDate=").concat(e,"&pageNumber=").concat(t,"&pageSize=").concat(n,"&searchKey=").concat(a)).then((function(e){c(e)})).catch((function(e){r(e)}))}))},H=n(166),J=n(9),U=n(4),_=n(731),K=n(730),G=n(729),Q=n(423),W=n.n(Q),X=n(424),Z=n.n(X),$=n(751),ee=n(1),te=Object(ee.jsx)(W.a,{fontSize:"small"}),ne=Object(ee.jsx)(Z.a,{fontSize:"small"});function ae(e){var t=s.useState(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],r=s.useState([]),o=Object(i.a)(r,2),l=o[0],u=o[1],d=s.useState(""),j=Object(i.a)(d,2),b=j[0],O=j[1],h=a&&0===l.length&&""!==b;s.useEffect((function(){u(e.values)}),[e.values]);var v=function(t){O(t.target.value),e.handleSearch(t.target.value)};return Object(ee.jsx)(G.a,{defaultValue:e.defaultValue,defaultChecked:e.defaultChecked,onChange:function(t,n){return function(t){e.getSelectedItems(t)}(n)},filterOptions:function(e){return e},multiple:!0,disableCloseOnSelect:!0,id:"checkboxes-tags",open:a,onOpen:function(){c(!0)},onClose:function(){c(!1)},isOptionEqualToValue:function(e,t){return e.title===t.title},isOptionEqualToValueIsbn:function(e,t){return e.isbn===t.isbn},getOptionLabel:function(e){return e.title},options:l,loading:h,renderOption:function(e,t,n){var a=n.selected;return Object(ee.jsxs)("li",Object(U.a)(Object(U.a)({},e),{},{children:[Object(ee.jsx)(_.a,{icon:te,checkedIcon:ne,style:{marginRight:8},checked:a}),t.title+" ("+t.isbn+")"]}))},style:{width:500},renderInput:function(t){return Object(ee.jsx)(K.a,Object(U.a)(Object(U.a)({},t),{},{value:b,placeholder:e.placeholder,onChange:v,InputProps:Object(U.a)(Object(U.a)({},t.InputProps),{},{endAdornment:Object(ee.jsxs)(s.Fragment,{children:[h?Object(ee.jsx)($.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment]})})}))}})}var ce=Object(b.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}},circularProgressContainer:{}}}))(v.a),re=o.d({startDate:o.f().required("Start Date is required")});function ie(){var e,t,n=Object(V.a)();Object(E.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var o,l=Object(s.useState)(""),b=Object(i.a)(l,2),B=b[0],q=b[1],R=(Object(z.i)().id,Object(j.b)()),Y=Object(s.useState)(0),U=Object(i.a)(Y,2),_=U[0],K=U[1],G=Object(s.useState)(25),Q=Object(i.a)(G,2),W=Q[0],X=Q[1],Z=Object(s.useState)((new Date).toISOString().substring(0,10)),$=Object(i.a)(Z,2),te=$[0],ne=$[1],ie=Object(s.useState)(""),se=Object(i.a)(ie,2),oe=se[0],le=se[1],ue=Object(s.useState)([]),de=Object(i.a)(ue,2),je=de[0],be=de[1],Oe=Object(s.useState)(""),he=Object(i.a)(Oe,2),ve=(he[0],he[1],Object(s.useState)(!1)),pe=Object(i.a)(ve,2),fe=pe[0],xe=pe[1],ge=(L.a.get("profileId"),Object(O.f)({mode:"onChange",resolver:Object(h.a)(re),defaultValues:{startDate:""}})),me=ge.handleSubmit,ke=function(){var e=Object(r.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!0),e.prev=1,e.next=4,F(te,_+1,W,B||"");case 4:t=e.sent,le(null===t||void 0===t?void 0:t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:xe(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),Se={someDate:(new Date).toISOString().substring(0,10)},we=function(e){be(e)},ye=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(H.e)(t);case 3:0===(null===(n=e.sent)||void 0===n?void 0:n.data.length)&&alert(t+" not available"),Ne(null===n||void 0===n?void 0:n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ce=Object(s.useState)([]),De=Object(i.a)(Ce,2),Ie=De[0],Ne=De[1],Pe=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(o),o=setTimeout(Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=5;break}return e.next=3,ye(t);case 3:e.next=6;break;case 5:Ne([]);case 6:case"end":return e.stop()}}),e)}))),500);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ke(te,_+1,W,B||"");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(H.b)(t,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n,r,i,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,n={bookIds:[]},je.forEach((function(e){n.bookIds=[].concat(Object(a.a)(n.bookIds),[null===e||void 0===e?void 0:e.id])})),e.prev=3,e.next=6,Te(t,n);case 6:r=e.sent,!0,R(Object(J.b)(null!==r&&void 0!==r&&r.message?null===r||void 0===r?void 0:r.message:"Books Ordered Successfully!")),ke(te,_+1,W,B||""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),R(Object(J.b)(null!==e.t0&&void 0!==e.t0&&null!==(i=e.t0.data)&&void 0!==i&&i.message?null===e.t0||void 0===e.t0||null===(s=e.t0.data)||void 0===s?void 0:s.message:"Something went wrong while placing order for books"));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsxs)(d.a,{children:[Object(ee.jsxs)("div",{className:n.titleContainer,children:[Object(ee.jsx)(M.a,{className:n.viewIcon}),Object(ee.jsx)("span",{className:n.pageTitle,children:"\xa0 Bulk Place Order "})]}),Object(ee.jsxs)(p.a,{elevation:5,className:n.root,children:[Object(ee.jsxs)(f.a,{container:!0,spacing:2,children:[Object(ee.jsx)(f.a,{item:!0,xs:12,sm:6,md:2,children:Object(ee.jsx)(x.a,{className:n.searchControl,id:"input-search-header",onChange:function(e){var t;return q(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},placeholder:"Search",startAdornment:Object(ee.jsx)(g.a,{position:"start",children:Object(ee.jsx)(T.U,{stroke:1.5,size:"1rem",className:n.startAdornment})})})}),Object(ee.jsx)(f.a,{item:!0,xs:12,sm:6,md:4,children:Object(ee.jsx)(O.b,{methods:ge,onSubmit:me(Ae),children:Object(ee.jsxs)(f.a,{container:!0,spacing:2,children:[Object(ee.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ee.jsx)(m.a,{type:"date",name:"startDueDate",defaultValue:Se.someDate,onChange:function(e){return ne(e.target.value)}})}),Object(ee.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ee.jsx)(k.a,{variant:"contained",className:n.btn,onClick:Ae,type:"submit",children:"View"})})]})})})]}),fe?Object(ee.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"10vh"},children:Object(ee.jsx)(S.a,{color:"primary",size:40})}):Object(ee.jsx)(w.a,{className:n.tableContainer,children:Object(ee.jsxs)(y.a,{className:n.table,"aria-label":"simple table",children:[Object(ee.jsx)(C.a,{className:n.tableHeaderCell,children:Object(ee.jsxs)(v.a,{children:[Object(ee.jsx)(D.a,{align:"center",children:" Cus Id "}),Object(ee.jsx)(D.a,{align:"center",children:" Full Name "}),Object(ee.jsx)(D.a,{align:"center",children:" Default Address "}),Object(ee.jsx)(D.a,{align:"center",children:" Delivery (Date) "}),Object(ee.jsx)(D.a,{align:"center",children:" Books Allowed "}),Object(ee.jsx)(D.a,{align:"center",children:" Books Ordered "}),Object(ee.jsx)(D.a,{align:"center",children:" Day "}),Object(ee.jsx)(D.a,{align:"center",children:" Select Book "}),Object(ee.jsx)(D.a,{align:"center",children:" Action "})]})}),oe?Object(ee.jsx)(I.a,{children:null===oe||void 0===oe||null===(e=oe.content)||void 0===e||null===(t=e.slice(_*W,_*W+W))||void 0===t?void 0:t.map((function(e,t){return Object(ee.jsxs)(ce,{children:[Object(ee.jsx)(D.a,{align:"center",children:null===e||void 0===e?void 0:e.profileId}),Object(ee.jsx)(D.a,{align:"center",children:null===e||void 0===e?void 0:e.fullName}),Object(ee.jsx)(D.a,{align:"center",children:null===e||void 0===e?void 0:e.addressType}),Object(ee.jsx)(D.a,{align:"center",children:Object(ee.jsx)(u.a,{format:"YYYY/MM/DD",date:null===e||void 0===e?void 0:e.deliveryDate})}),Object(ee.jsxs)(D.a,{align:"center",children:[" ",null===e||void 0===e?void 0:e.booksAllowed," "]}),Object(ee.jsxs)(D.a,{align:"center",children:[" ",null===e||void 0===e?void 0:e.booksOrdered," "]}),Object(ee.jsxs)(D.a,{align:"center",children:[" ",null===e||void 0===e?void 0:e.day," "]}),Object(ee.jsx)(D.a,{align:"center",children:Object(ee.jsx)(ae,{values:Ie,handleSearch:Pe,getSelectedItems:we,placeholder:"Search Books To Order"})}),Object(ee.jsx)(D.a,{align:"center",children:Object(ee.jsx)(N.a,{title:"Place Order ",children:Object(ee.jsx)(P.a,{children:Object(ee.jsx)(k.a,{variant:"contained",className:n.btn,onClick:function(){return Be(null===e||void 0===e?void 0:e.id)},type:"submit",children:"Submit"})})})})]},t)}))}):Object(ee.jsx)("caption",{style:{textAlign:"center"},children:" Sorry! No data available "})]})}),Object(ee.jsx)(A.a,{rowsPerPageOptions:[25,50,100],component:"div",count:(null===oe||void 0===oe?void 0:oe.totalElements)||0,rowsPerPage:W,page:_,onPageChange:function(e,t){K(t)},onRowsPerPageChange:function(e){X(+e.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]})]})}}}]);
//# sourceMappingURL=96.eaef0e44.chunk.js.map