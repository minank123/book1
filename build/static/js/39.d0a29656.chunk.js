(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[39,53],{943:function(e,t,c){"use strict";c.d(t,"d",(function(){return o})),c.d(t,"c",(function(){return d})),c.d(t,"a",(function(){return l})),c.d(t,"b",(function(){return r}));var n=c(11),a=c(9),i=c(5),s=function(e){return{type:i.Cb,error:e}},l=function(e,t,c){return function(i){try{Object(n.a)("https://prodservice.bookeinstein.com","POST","schools-service/schools/".concat(t,"/leaves"),e,!0).then((function(e){i(Object(a.b)(null===e||void 0===e?void 0:e.message)),c&&c(e)})).catch((function(e){var t;console.log(e),e.code,i(Object(a.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message))}))}catch(s){s.code}}},o=function(e,t,c){return function(i){try{Object(n.a)("https://prodservice.bookeinstein.com","PUT","schools-service/schools/leaves/".concat(t),e,!0).then((function(e){e&&(i(Object(a.b)(null===e||void 0===e?void 0:e.message)),c&&c(e))})).catch((function(e){var t;console.log(e),i(Object(a.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message))}))}catch(l){var s;i(Object(a.b)(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message)),console.log(l)}}},r=function(e,t){return function(c){try{Object(n.a)("https://prodservice.bookeinstein.com","DELETE","schools-service/schools/leaves/".concat(e),!0).then((function(e){c(Object(a.b)("Leave deleted successfully")),t&&t(e)})).catch((function(e){var t;c(Object(a.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),console.log(e)}))}catch(i){console.log(i)}}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(l,o){l({type:i.Db});try{Object(n.a)("https://prodservice.bookeinstein.com","GET","schools-service/schools/".concat(e,"/leaves?pageNumber=").concat(c,"&pageSize=").concat(t),!0).then((function(e){l(function(e){return{type:i.Eb,payload:e}}({allLeaves:e}))})).catch((function(e){l(s(e)),l(Object(a.b)(null===e||void 0===e?void 0:e.message))}))}catch(r){l(s("Something went wrong"))}}}},944:function(e,t,c){"use strict";var n=c(1105),a=c(1104),i=c(342),s=c(1);t.a=function(e){var t=e.isError,c=e.setError,l=e.message,o=Object(i.a)();return Object(s.jsx)(n.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:3e3,onClose:function(){return c(!1)},children:Object(s.jsx)(a.a,{onClose:function(){return c(!1)},severity:"error",style:{background:o.palette.error.dark,color:"#fff"},children:l})})}},966:function(e,t,c){"use strict";c.r(t);var n=c(16),a=c(4),i=c(28),s=c(7),l=c(0),o=c(21),r=c(943),d=c(64),j=c.n(d),b=c(43),u=c(38),O=c(85),h=c(34),x=c(349),v=c(944),m=c(740),p=c(898),f=c(158),g=c(741),y=c(899),D=c(20),N=c(343),S=c(900),k=c(119),w=c(140),E=c(1),C=u.d({title:u.f("Enter Title here").required("Title is required"),description:u.f("Enter Description here").required("Description is required"),startDate:u.f("Enter Start Date here").required("Start Date is required"),endDate:u.f("Enter End Date here").required("End Date is required")});function A(e){var t=e.isOpen,c=e.setOpen,a=e.isError,d=e.setError,u=e.isEditData,A=e.id,T=Object(w.a)(),L=Object(l.useState)(!1),P=Object(s.a)(L,2),I=P[0],q=(P[1],Object(o.b)()),M={title:(null===u||void 0===u?void 0:u.title)||"",description:(null===u||void 0===u?void 0:u.description)||"",startDate:(null===u||void 0===u?void 0:u.startDate)||"",endDate:(null===u||void 0===u?void 0:u.endDate)||""},W=Object(b.f)({mode:"onChange",resolver:Object(O.a)(C),defaultValues:M}),F=W.reset,B=W.handleSubmit,U=function(){c(!1),F()},H=function(){var e=Object(i.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={title:null===t||void 0===t?void 0:t.title,description:null===t||void 0===t?void 0:t.description,startDate:null===t||void 0===t?void 0:t.startDate,endDate:null===t||void 0===t?void 0:t.endDate},u?(q(Object(r.d)(c,u.id,(function(){q(Object(r.c)(u.schoolId))}))),U()):(q(Object(r.a)(c,A,(function(){q(Object(r.c)(A))}))),U());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[Object(E.jsxs)(m.a,{open:t,onClose:function(e,t){"backdropClick"!==t&&U()},classes:{paper:T.dialog},children:[Object(E.jsx)(p.a,{className:T.dialogTitle,children:Object(E.jsxs)("div",{className:T.dialogTitleChild,children:[Object(E.jsx)(f.a,{style:{fontSize:"20px"},children:u?"Update Leave":"Add Leave"}),Object(E.jsx)(g.a,{to:"#",onClick:U,children:Object(E.jsx)(j.a,{className:T.closeIcon})})]})}),Object(E.jsxs)(h.a,{methods:W,onSubmit:B(H),children:[Object(E.jsx)(y.a,{children:Object(E.jsxs)(D.a,{container:!0,children:[Object(E.jsxs)(D.a,{item:!0,xs:12,children:[Object(E.jsxs)("label",{children:["Title ",Object(E.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(E.jsx)(h.d,{name:"title",placeholder:"Title here",autoFocus:!0}),Object(E.jsx)("br",{})," ",Object(E.jsx)("br",{})]}),Object(E.jsxs)(D.a,{item:!0,xs:12,children:[Object(E.jsxs)("label",{children:["Description ",Object(E.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(E.jsx)(h.d,{name:"description",placeholder:"Description here",className:T.textField})," ",Object(E.jsx)("br",{})," ",Object(E.jsx)("br",{})]}),Object(E.jsxs)(D.a,{item:!0,xs:12,children:[Object(E.jsxs)("label",{className:T.label,children:["Start Date ",Object(E.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(E.jsx)(h.d,{type:"date",name:"startDate",placeholder:"Start Date",className:T.textField})," ",Object(E.jsx)("br",{})," ",Object(E.jsx)("br",{})]}),Object(E.jsxs)(D.a,{item:!0,xs:12,children:[Object(E.jsxs)("label",{className:T.label,children:["End Date ",Object(E.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(E.jsx)(h.d,{type:"date",name:"endDate",placeholder:"End Date",className:T.textField})]})]})}),Object(E.jsx)(N.a,{style:{marginTop:15}}),Object(E.jsxs)(S.a,{className:T.dialogAction,children:[Object(E.jsx)(k.a,{variant:"outlined",color:"secondary",className:T.buttonCancel,onClick:U,children:"Close"}),Object(E.jsx)(k.a,{variant:"contained",type:"submit",className:T.buttonSubmit,children:u?"Update":"Add"})]})]})]}),Object(E.jsx)("span",{className:T.loader,children:I?Object(x.a)():""}),Object(E.jsx)(v.a,{isError:a,setError:d,message:"Something went wrong !"})]})}var T=c(750),L=c(745),P=c(222),I=c(746),q=c(747),M=c(748),W=c(113),F=c(749),B=c(346),U=c(738),H=c(288),R=c.n(H),_=c(289),z=c.n(_),J=c(290),G=c.n(J),V=c(97),Y=c.n(V),K=c(62),Q=c(173),X=c(46),Z=Object(T.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(L.a);t.default=function(e){var t=Object(K.a)();Object(X.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var c=Object(o.b)(),d=Object(l.useState)(0),j=Object(s.a)(d,2),b=j[0],u=j[1],O=Object(l.useState)(25),h=Object(s.a)(O,2),x=h[0],v=h[1],m=Object(l.useState)(!1),p=Object(s.a)(m,2),f=p[0],g=p[1],y=Object(l.useState)({isOpen:!1,title:"",subTitle:""}),D=Object(s.a)(y,2),N=D[0],S=D[1],w=Object(l.useState)(null),C=Object(s.a)(w,2),T=C[0],L=C[1],H=Object(o.c)((function(e){return null===e||void 0===e?void 0:e.leave})).allLeaves,_=null===H||void 0===H?void 0:H.content,J=function(){var t=Object(i.a)(Object(n.a)().mark((function t(i){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c(Object(r.b)(i,(function(){c(Object(r.c)(null===e||void 0===e?void 0:e.id,x,b+1))}))),S(Object(a.a)(Object(a.a)({},N),{},{isOpen:!1}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.useEffect)((function(){c(Object(r.c)(null===e||void 0===e?void 0:e.id,x,b+1))}),[null===e||void 0===e?void 0:e.id,x,b]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:t.titleContainer,children:[Object(E.jsx)(Y.a,{className:t.viewIcon}),Object(E.jsx)("span",{className:t.pageTitle,children:"\xa0 Schools Leaves "})]}),Object(E.jsxs)(P.a,{elevation:5,className:t.root,children:[Object(E.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(E.jsxs)(k.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9"},onClick:function(){g(!0),L(null)},children:[Object(E.jsx)(G.a,{})," Leaves"]})}),Object(E.jsx)(I.a,{className:t.tableContainer,children:Object(E.jsxs)(q.a,{className:t.table,"aria-label":"simple table",children:[Object(E.jsx)(M.a,{className:t.tableHeaderCell,children:Object(E.jsxs)(Z,{children:[Object(E.jsx)(W.a,{children:" Title "}),Object(E.jsx)(W.a,{children:" Description "}),Object(E.jsx)(W.a,{children:" Start Date "}),Object(E.jsx)(W.a,{children:" End Date "}),Object(E.jsx)(W.a,{align:"right",children:" Action "})]})}),_?Object(E.jsx)(F.a,{children:null===_||void 0===_?void 0:_.map((function(e,t){return Object(E.jsxs)(Z,{children:[Object(E.jsxs)(W.a,{children:[" ",e.title," "]}),Object(E.jsxs)(W.a,{children:[" ",e.description," "]}),Object(E.jsxs)(W.a,{children:[" ",e.startDate," "]}),Object(E.jsxs)(W.a,{children:[" ",e.endDate," "]}),Object(E.jsxs)(W.a,{align:"right",children:[Object(E.jsx)(B.a,{style:{cursor:"pointer"},onClick:function(){return t=e,g(!0),void L(t);var t},children:Object(E.jsx)(R.a,{color:"primary"})}),Object(E.jsx)(B.a,{onClick:function(){S({isOpen:!0,title:"Delete Leave",subTitle:"Are you sure you want to delete this school leave.",onConfirm:function(){J(e.id)}})},children:Object(E.jsx)(z.a,{color:"error",style:{cursor:"pointer"}})})]})]},t)}))}):Object(E.jsx)("caption",{style:{textAlign:"center"},children:"Sorry! No data available"})]})}),Object(E.jsx)(U.a,{rowsPerPageOptions:[25,50,100],component:"div",count:(null===H||void 0===H?void 0:H.totalElements)||0,rowsPerPage:x,page:b,onPageChange:function(e,t){u(t)},onRowsPerPageChange:function(e){v(+e.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),f&&Object(E.jsx)(A,{isOpen:f,setOpen:g,id:e.id,isEditData:T}),N&&Object(E.jsx)(Q.a,{confirmDialog:N,setConfirmDialog:S})]})}},999:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return S}));var n=c(16),a=c(28),i=c(7),s=c(0),l=c(21),o=c(222),r=c(343),d=c(20),j=c(65),b=c(97),u=c.n(b),O=c(62),h=c(943),x=c(40),v=c(42),m=c.n(v),p=c(966),f=c(46),g=c(29),y=c.n(g),D=c(1),N=y.a.get("schoolId");function S(){var e,t,c,b=Object(O.a)();Object(f.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var v=Object(l.b)(),g=Object(x.i)().id,S=Object(x.h)(),k=null===S||void 0===S||null===(e=S.state)||void 0===e?void 0:e.cookieid,w=null===(t=window)||void 0===t||null===(c=t.location)||void 0===c?void 0:c.pathname,E=Object(s.useState)(null),C=Object(i.a)(E,2),A=C[0],T=C[1],L=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat("https://prodservice.bookeinstein.com","/schools-service/schools/").concat(t)).then((function(e){T(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){return"/schooladmin/school"===w?k:g};return Object(s.useEffect)((function(){var e=y.a.get("schoolId");"/schooladmin/school"===w?e&&(v(Object(h.c)("".concat(e))),L("".concat(e))):(v(Object(h.c)(g)),L(g))}),[N,g]),Object(s.useEffect)((function(){k&&P()}),[k]),Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(o.a,{style:{padding:20},children:[Object(D.jsxs)("div",{className:b.titleContainer,children:[Object(D.jsx)(u.a,{className:b.viewIcon}),Object(D.jsx)("span",{className:b.pageTitle,children:"\xa0 School Details "})]}),Object(D.jsx)(r.a,{style:{margin:"30px 0px"}}),Object(D.jsxs)(d.a,{container:!0,rowSpacing:4,children:[Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" School Name "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null===A||void 0===A?void 0:A.name,fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" School Branch "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null===A||void 0===A?void 0:A.branch,fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" Stock Management Allowed "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:!0===(null===A||void 0===A?void 0:A.stockManagementAllowed)?"Yes":"No",fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" Weekday "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null===A||void 0===A?void 0:A.weekDay,fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" Book Frequency "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null!==A&&void 0!==A&&A.bookFrequency?null===A||void 0===A?void 0:A.bookFrequency:"",fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" No Of Books Allowed "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:(null===A||void 0===A?void 0:A.numberOfBooksAllowed)||"",fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" School Address "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null===A||void 0===A?void 0:A.address,fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:" School Code "})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null===A||void 0===A?void 0:A.pincode,fullWidth:!0})})]}),Object(D.jsxs)(d.a,{item:!0,container:!0,spacing:2,children:[Object(D.jsx)(d.a,{item:!0,xs:12,sm:2,children:Object(D.jsx)("label",{style:{verticalAlign:"sub"},children:"School Status"})}),Object(D.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(j.a,{name:"name",disabled:!0,value:null===A||void 0===A?void 0:A.status,fullWidth:!0})})]})]}),Object(D.jsx)(r.a,{style:{margin:"30px 0px"}}),Object(D.jsx)(p.default,{id:P()})]})})}}}]);
//# sourceMappingURL=39.d0a29656.chunk.js.map