(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[54],{1092:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return M}));var c=n(7),o=n(0),a=n(54),i=n(21),s=n(40),l=n(750),r=n(342),d=n(745),u=n(222),b=n(20),j=n(65),h=n(223),v=n(746),O=n(747),f=n(748),p=n(113),m=n(749),g=n(158),x=n(742),y=n(346),k=n(738),N=n(26),S=n(290),C=n.n(S),I=n(96),q=n.n(I),T=n(353),P=n(82),A=n(988),E=n(46),w=n(1),D=Object(l.a)((function(t){return{root:{"&:nth-of-type(even)":{backgroundColor:t.palette.action.hover}}}}))(d.a);function M(){var t,e=Object(T.a)();Object(E.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var n=Object(s.i)().id,l=Object(i.b)(),d=Object(r.a)(),S=Object(o.useState)(""),I=Object(c.a)(S,2),M=I[0],U=I[1],B=Object(o.useState)(0),L=Object(c.a)(B,2),R=L[0],z=L[1],F=Object(o.useState)(10),G=Object(c.a)(F,2),V=G[0],H=G[1],J=Object(o.useState)(!1),K=Object(c.a)(J,2),_=K[0],Q=K[1],W=Object(o.useState)(null),X=Object(c.a)(W,2),Y=X[0],Z=X[1],$=Object(o.useState)(null),tt=Object(c.a)($,2),et=tt[0],nt=tt[1],ct=Object(i.c)((function(t){return t.books})).allBooks;return Object(o.useEffect)((function(){l(Object(P.b)(M||"",R+1,V))}),[M,R,V]),Object(o.useEffect)((function(){n&&Z(n)}),[n]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(a.a,{children:[Object(w.jsxs)("div",{className:e.titleContainer,children:[Object(w.jsx)(q.a,{className:e.viewIcon}),Object(w.jsx)("span",{className:e.pageTitle,children:"\xa0 Select Books For Stock "})]}),Object(w.jsxs)(u.a,{elevation:5,className:e.root,children:[Object(w.jsx)(b.a,{style:{display:"flex",justifyContent:"space-between"},children:Object(w.jsx)("div",{children:Object(w.jsx)(j.a,{className:e.searchControl,id:"input-search-header",value:M,onChange:function(t){return U(t.target.value)},placeholder:"Search",startAdornment:Object(w.jsx)(h.a,{position:"start",children:Object(w.jsx)(N.U,{stroke:1.5,size:"1rem",className:e.startAdornment})})})})}),Object(w.jsx)(v.a,{className:e.tableContainer,children:Object(w.jsxs)(O.a,{className:e.table,"aria-label":"simple table",children:[Object(w.jsx)(f.a,{className:e.tableHeaderCell,children:Object(w.jsxs)(D,{children:[Object(w.jsx)(p.a,{children:" Cover"}),Object(w.jsx)(p.a,{children:" Title "}),Object(w.jsx)(p.a,{children:" Author "}),Object(w.jsx)(p.a,{children:" Publisher "}),Object(w.jsx)(p.a,{children:" Isbn No. "}),Object(w.jsx)(p.a,{align:"center",children:" Rack "}),Object(w.jsx)(p.a,{align:"center",children:" Status "}),Object(w.jsx)(p.a,{align:"right",children:" Action "})]})}),Object(w.jsx)(m.a,{children:null===ct||void 0===ct||null===(t=ct.content)||void 0===t?void 0:t.map((function(t){var n;return Object(w.jsxs)(D,{children:[Object(w.jsx)(p.a,{children:Object(w.jsx)("img",{src:null===t||void 0===t||null===(n=t.imageUrls)||void 0===n?void 0:n[0],alt:"book",width:"60px"})}),Object(w.jsxs)(p.a,{children:[" ",null===t||void 0===t?void 0:t.title," "]}),Object(w.jsxs)(p.a,{children:[" ",null===t||void 0===t?void 0:t.author," "]}),Object(w.jsxs)(p.a,{children:[" ",null===t||void 0===t?void 0:t.publisher," "]}),Object(w.jsxs)(p.a,{children:[" ",null===t||void 0===t?void 0:t.isbn," "]}),Object(w.jsxs)(p.a,{align:"center",children:[" ",null===t||void 0===t?void 0:t.shelfId]}),Object(w.jsx)(p.a,{align:"center",children:Object(w.jsx)(g.a,{className:e.status,style:{backgroundColor:"ACTIVE"===(null===t||void 0===t?void 0:t.status)&&d.palette.success.main||"PENDING"===(null===t||void 0===t?void 0:t.status)&&"blue"||"INACTIVE"===(null===t||void 0===t?void 0:t.status)&&d.palette.warning.dark},children:null===t||void 0===t?void 0:t.status})}),Object(w.jsx)(p.a,{align:"right",children:Object(w.jsx)(x.a,{title:"Add Stock",children:Object(w.jsx)(y.a,{onClick:function(){return nt(null===(e=t)||void 0===e?void 0:e.id),void Q(!0);var e},children:Object(w.jsx)(C.a,{color:"primary",style:{cursor:"pointer"}})})})})]},null===t||void 0===t?void 0:t.id)}))})]})}),Object(w.jsx)(k.a,{rowsPerPageOptions:[10,15,25],component:"div",count:(null===ct||void 0===ct?void 0:ct.totalElements)||0,rowsPerPage:V,page:R,onPageChange:function(t,e){z(e)},onRowsPerPageChange:function(t){H(+t.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),_&&Object(w.jsx)(A.a,{open:_,close:function(){Q(!1)},isSchoolId:Y,isBooksId:et})]})})}},950:function(t,e,n){"use strict";n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return b})),n.d(e,"e",(function(){return j})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return O}));var c=n(11),o=n(5),a=n(9),i=function(t){return{type:o.ag,error:t}},s=function(t){return{type:o.Rf,error:t}},l=function(t){return{type:o.g,error:t}},r=function(t){return{type:o.he,error:t}},d=function(t){return{type:o.Lf,error:t}},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25;return function(l){l({type:o.bg});try{Object(c.a)("http://localhost:8102","GET","books-service/books/schools/".concat(t,"/total?searchKey=").concat(e,"&pageNumber=").concat(n,"&pageSize=").concat(s),!0).then((function(t){l(function(t){return{type:o.cg,payload:t}}({viewStockData:t}))})).catch((function(t){l(i(t)),l(Object(a.b)(null===t||void 0===t?void 0:t.message))}))}catch(r){l(i(null===r||void 0===r?void 0:r.message))}}},b=function(t,e,n){return function(o){try{Object(c.a)("http://localhost:8102","DELETE","books-service/books/".concat(t,"/schools/").concat(e,"/total"),!0).then((function(t){o(Object(a.b)(null!==t&&void 0!==t&&t.message?null===t||void 0===t?void 0:t.message:"Deleted Successfully")),n&&n(t)})).catch((function(t){var e;console.log(t),o(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(i){console.log(i),o(Object(a.b)("Deleted Module Successfully"))}}},j=function(t,e,n,i){return function(l){l({type:o.Sf});try{Object(c.a)("http://localhost:8102","PUT","books-service/books/".concat(e,"/schools/").concat(n,"/total?quantity=").concat(t),!0).then((function(t){l(function(t){return{type:o.Tf,payload:t}}(t)),i&&i(t),l(Object(a.b)(null===t||void 0===t?void 0:t.message))})).catch((function(t){var e;console.log(t),l(s(t)),l(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(r){l(s(null===r||void 0===r?void 0:r.message))}}},h=function(t,e,n,i){return function(s){s({type:o.h});try{Object(c.a)("http://localhost:8102","POST","books-service/books/".concat(e,"/schools/").concat(n,"/total?quantity=").concat(t),!0).then((function(t){s(function(t){return{type:o.i,payload:t}}(t)),i&&i(t)})).catch((function(t){var e;s(l(t)),s(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(r){s(l(null===r||void 0===r?void 0:r.message))}}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return function(i){i({type:o.ie});try{Object(c.a)("http://localhost:8102","GET","books-service/books/total?searchKey=".concat(t,"&pageNumber=").concat(e,"&pageSize=").concat(n),!0).then((function(t){i(function(t){return{type:o.je,payload:t}}({libraryStockData:t}))})).catch((function(t){i(r(t)),i(Object(a.b)(null===t||void 0===t?void 0:t.message))}))}catch(s){i(r(null===s||void 0===s?void 0:s.message))}}},O=function(t,e,n){return function(i){i({type:o.Mf});try{var s=e>=0;Object(c.a)("http://localhost:8102","PUT","books-service/books/".concat(t,"/total/library-stock?quantity=").concat(e," "),!0).then((function(t){var e;i((e=t,{type:o.Nf,payload:e})),i(Object(a.b)("".concat(s?"Incremented":"Decremented"," successfully"))),n&&n(t)})).catch((function(t){var e;i(d(t)),i(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(l){i(d(null===l||void 0===l?void 0:l.message))}}}},988:function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));n(0);var c=n(43),o=n(85),a=n(34),i=n(38),s=n(64),l=n.n(s),r=n(740),d=n(898),u=n(158),b=n(741),j=n(899),h=n(20),v=n(343),O=n(900),f=n(119),p=n(21),m=n(140),g=n(950),x=n(40),y=n(1),k=i.d({quantity:i.f("Enter stock quantity").required("Stock quantity is required")});function N(t){var e=t.open,n=t.close,i=t.isEditData,s=t.isSchoolId,N=t.isBooksId,S=Object(m.a)(),C=Object(x.g)(),I=Object(p.b)(),q={quantity:(null===i||void 0===i?void 0:i.totalQuantity)||""},T=Object(c.f)({mode:"onChange",resolver:Object(o.a)(k),defaultValues:q}),P=T.handleSubmit;return Object(y.jsx)("div",{children:Object(y.jsxs)(r.a,{open:e,classes:{paper:S.dialog},children:[Object(y.jsx)(d.a,{className:S.dialogTitle,children:Object(y.jsxs)("div",{className:S.dialogTitleChild,children:[Object(y.jsx)(u.a,{style:{fontSize:"20px"},children:i?"Update stock quantity":"Add stock quantity"}),Object(y.jsx)(b.a,{to:"#",onClick:n,children:Object(y.jsx)(l.a,{className:S.closeIcon})})]})}),Object(y.jsxs)(a.a,{methods:T,onSubmit:P((function(t){I(i?Object(g.e)(parseInt(null===t||void 0===t?void 0:t.quantity),null===i||void 0===i?void 0:i.bookId,s,(function(){n(),I(Object(g.f)(s))})):Object(g.a)(parseInt(null===t||void 0===t?void 0:t.quantity),N,s,(function(){n(),C.push("/admin/view-stock/".concat(s))})))})),children:[Object(y.jsx)(j.a,{children:Object(y.jsx)(h.a,{container:!0,spacing:2,children:Object(y.jsxs)(h.a,{item:!0,xs:12,sm:12,children:[Object(y.jsxs)("label",{className:S.label,children:["Increment or decrement stock quantity",Object(y.jsx)("span",{className:S.mandatory,children:"*"})]}),Object(y.jsx)(a.d,{name:"quantity",placeholder:"Add stock quantity",className:S.textField,autoFocus:!0})]})})}),Object(y.jsx)(v.a,{style:{marginTop:15}}),Object(y.jsxs)(O.a,{className:S.dialogAction,children:[Object(y.jsx)(f.a,{variant:"outlined",color:"primary",className:S.buttonCancel,onClick:n,children:"Close"}),Object(y.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",className:S.buttonSubmit,children:i?"Update":"Add"})]})]})]})})}}}]);
//# sourceMappingURL=54.a6a11260.chunk.js.map