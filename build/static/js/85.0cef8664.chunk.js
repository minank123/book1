(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[85],{1128:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return me}));var c=n(4),i=n(7),a=n(0),o=n(21),l=n(174),s=n(54),r=n(750),d=n(342),j=n(745),u=n(222),b=n(20),O=n(65),v=n(223),h=n(119),x=n(746),m=n(747),p=n(748),f=n(113),y=n(749),g=n(158),C=n(742),k=n(346),N=n(738),S=n(26),P=n(288),I=n.n(P),F=n(96),q=n.n(F),A=n(24),E=n(43),T=n(38),M=n(85),w=n(64),D=n.n(w),z=n(140),H=n(226),R=n(34),V=n(740),B=n(898),L=n(741),U=n(899),_=n(907),Y=n(878),J=n(904),G=n(224),K=n(941),W=n(860),Q=n(343),X=n(900),Z=n(120),$=n.n(Z),ee=(n(362),n(1)),te=[{id:0,status:"WEEKLY"},{id:1,status:"MONTHLY"},{id:2,status:"FORTNIGHTLY"}],ne=[{id:0,status:"HOME"},{id:1,status:"SCHOOL"}],ce=[{id:0,status:"ACTIVE"},{id:1,status:"INACTIVE"}],ie=T.d({name:T.f().required("Name is required").trim(),frequency:T.f().required("Frequency is required"),booksCount:T.f().required("Books Count is required"),registrationFee:T.f().required("Registration Fee is required"),securityFee:T.f().required("Security Fee is required"),type:T.f().required("Type is required")}),ae={PaperProps:{style:{maxHeight:224,width:250}}};function oe(e){var t=e.isOpen,n=e.setOpen,c=e.isEditData,s=Object(z.a)(),r=Object(o.b)(),d=Object(o.c)((function(e){return null===e||void 0===e?void 0:e.school})),j=d.schoolList,u=(d.loading,Object(o.c)((function(e){return null===e||void 0===e?void 0:e.userProfile})).loggedUserProfile,Object(a.useState)([])),O=Object(i.a)(u,2),v=(O[0],O[1]),x=Object(a.useState)([]),m=Object(i.a)(x,2),p=m[0],f=m[1],y={name:(null===c||void 0===c?void 0:c.name)||"",frequency:(null===c||void 0===c?void 0:c.frequency)||"",booksCount:(null===c||void 0===c?void 0:c.booksCount)||"",registrationFee:(null===c||void 0===c?void 0:c.registrationFee)||"",securityFee:(null===c||void 0===c?void 0:c.securityFee)||"",type:(null===c||void 0===c?void 0:c.type)||"",schoolIds:(null===c||void 0===c?void 0:c.schoolIds)||"",status:(null===c||void 0===c?void 0:c.status)||"ACTIVE"},C=Object(E.f)({mode:"onChange",resolver:Object(M.a)(ie),defaultValues:y}),k=C.reset,N=C.handleSubmit,S=(0,C.watch)("type"),P=function(){n(!1),k()};Object(a.useEffect)((function(){r(Object(H.f)())}),[]),Object(a.useEffect)((function(){c&&f(null===c||void 0===c?void 0:c.schoolIds)}),[]);return Object(ee.jsx)("div",{children:Object(ee.jsxs)(V.a,{open:t,onClose:P,classes:{paper:s.dialog},children:[Object(ee.jsx)(B.a,{className:s.dialogTitle,children:Object(ee.jsxs)("div",{className:s.dialogTitleChild,children:[Object(ee.jsx)(g.a,{style:{fontSize:"20px"},children:c?"Update Plan":"Add Plan"}),Object(ee.jsx)(L.a,{to:"#",onClick:P,children:Object(ee.jsx)(D.a,{className:s.closeIcon})})]})}),Object(ee.jsxs)(R.a,{methods:C,onSubmit:N((function(e){var t={name:null===e||void 0===e?void 0:e.name,frequency:null===e||void 0===e?void 0:e.frequency,booksCount:null===e||void 0===e?void 0:e.booksCount,registrationFee:null===e||void 0===e?void 0:e.registrationFee,securityFee:null===e||void 0===e?void 0:e.securityFee,type:null===e||void 0===e?void 0:e.type,schoolIds:p,status:null===e||void 0===e?void 0:e.status};r(c?Object(l.t)(t,c.id,"Plan Update Successfully",(function(){r(Object(l.j)()),P()})):Object(l.a)(t,(function(){r(Object(l.j)()),P()})))})),children:[Object(ee.jsx)($.a,{className:s.ScrollHeight,children:Object(ee.jsx)(U.a,{children:Object(ee.jsxs)(b.a,{container:!0,children:[Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Name ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsx)(R.d,{name:"name",autoFocus:!0})]}),Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Frequency ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsxs)(R.c,{name:"frequency",label:"",disabled:c&&!0,children:[Object(ee.jsx)("option",{value:"",children:" Select Frequency "}),null===te||void 0===te?void 0:te.map((function(e,t){return Object(ee.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))]})]}),Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Book Count ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsx)(R.d,{name:"booksCount",type:"number"})]}),Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Registration Fee",Object(ee.jsx)("h1",{})," ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsx)(R.d,{name:"registrationFee",type:"number"})]}),Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Security Fee ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsx)(R.d,{name:"securityFee",type:"number"})]}),Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Type ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsxs)(R.c,{name:"type",label:"",children:[Object(ee.jsx)("option",{value:"",children:" Select Type "}),null===ne||void 0===ne?void 0:ne.map((function(e,t){return Object(ee.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},e.id)}))]})]}),"SCHOOL"===S&&Object(ee.jsx)(b.a,{item:!0,xs:12,children:Object(ee.jsxs)(_.a,{sx:{m:1,width:"100%"},children:[Object(ee.jsxs)("label",{children:["Select Schools ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsx)(Y.a,{name:"schoolIds",multiple:!0,value:function(e){var t=[];return null===e||void 0===e||e.forEach((function(e){var n=null===j||void 0===j?void 0:j.filter((function(t){return t.id===e}));(null===n||void 0===n?void 0:n.length)>0&&t.push(n[0].nameBranch)})),t}(p),input:Object(ee.jsx)(J.a,{}),getSelectedItems:function(e){v(e)},renderValue:function(e){return e.join(", ")},MenuProps:ae,children:null===j||void 0===j?void 0:j.map((function(e){return Object(ee.jsxs)(G.a,{value:e.nameBranch,children:[Object(ee.jsx)(K.a,{type:"checkbox",checked:null===p||void 0===p?void 0:p.includes(e.id),onChange:function(){return c?function(e){if(null!==p&&void 0!==p&&p.includes(e)){var t=null===p||void 0===p?void 0:p.filter((function(t){return t!==e}));f(t)}else f([].concat(Object(A.a)(p),[e]))}(e.id):function(e){if(null!==p&&void 0!==p&&p.includes(e)){var t=null===p||void 0===p?void 0:p.filter((function(t){return t!==e}));f(t)}else f([].concat(Object(A.a)(p),[e]))}(e.id)}}),Object(ee.jsx)(W.a,{primary:e.nameBranch})]},e)}))})]})}),Object(ee.jsxs)(b.a,{item:!0,xs:12,children:[Object(ee.jsxs)("label",{children:["Status ",Object(ee.jsx)("span",{className:s.mandatory,children:"*"})]}),Object(ee.jsx)(R.c,{name:"status",label:"",children:null===ce||void 0===ce?void 0:ce.map((function(e,t){return Object(ee.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))})]})]})})}),Object(ee.jsx)(Q.a,{style:{marginTop:15}}),Object(ee.jsxs)(X.a,{className:s.dialogAction,children:[Object(ee.jsx)(h.a,{variant:"outlined",color:"secondary",className:s.buttonCancel,onClick:P,children:"Close"}),Object(ee.jsx)(h.a,{variant:"contained",type:"submit",className:s.buttonSubmit,children:c?"Update":"Add"})]})]})]})})}var le=n(290),se=n.n(le),re=n(141),de=n.n(re),je=n(40),ue=n(62),be=n(46),Oe=n(289),ve=n.n(Oe),he=n(173),xe=Object(r.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(j.a);function me(){var e=Object(ue.a)();Object(be.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var t=Object(o.c)((function(e){return null===e||void 0===e?void 0:e.userProfile})).loggedUserProfile,n=Object(o.b)(),r=Object(d.a)(),j=Object(je.g)(),P=Object(a.useState)(""),F=Object(i.a)(P,2),A=F[0],E=F[1],T=Object(a.useState)(!1),M=Object(i.a)(T,2),w=M[0],D=M[1],z=Object(a.useState)(0),H=Object(i.a)(z,2),R=H[0],V=H[1],B=Object(a.useState)(25),L=Object(i.a)(B,2),U=L[0],_=L[1],Y=Object(a.useState)(null),J=Object(i.a)(Y,2),G=J[0],K=J[1],W=Object(o.c)((function(e){return null===e||void 0===e?void 0:e.subscriptions})).getAllPlans,Q=null===W||void 0===W?void 0:W.content,X=Object(a.useState)({isOpen:!1,title:"",subTitle:""}),Z=Object(i.a)(X,2),$=Z[0],te=Z[1];return Object(a.useEffect)((function(){n(Object(l.j)(U,A||"",R+1))}),[U,A,R]),Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsxs)(s.a,{children:[Object(ee.jsxs)("div",{className:e.titleContainer,children:[Object(ee.jsx)(q.a,{className:e.viewIcon}),Object(ee.jsx)("span",{className:e.pageTitle,children:"\xa0 All Plans "})]}),Object(ee.jsxs)(u.a,{elevation:5,className:e.root,children:[Object(ee.jsxs)(b.a,{container:!0,spacing:3,style:{display:"flex",justifyContent:"space-between"},children:[Object(ee.jsx)(b.a,{item:!0,xs:12,sm:6,md:6,children:Object(ee.jsx)("div",{children:Object(ee.jsx)(O.a,{className:e.searchControl,id:"input-search-header",value:A,onChange:function(e){return E(e.target.value)},placeholder:"Search",startAdornment:Object(ee.jsx)(v.a,{position:"start",children:Object(ee.jsx)(S.U,{stroke:1.5,size:"1rem",className:e.startAdornment})})})})}),Object(ee.jsx)(b.a,{item:!0,xs:12,sm:6,md:6,children:Object(ee.jsx)("div",{className:e.btn,children:("ADMIN"===(null===t||void 0===t?void 0:t.role)||"SUPER_ADMIN"===(null===t||void 0===t?void 0:t.role))&&Object(ee.jsxs)(h.a,{variant:"contained",color:"primary",onClick:function(){D(!0),K(null)},className:e.btnAddDeliveryPlan,children:[Object(ee.jsx)(se.a,{})," Plan"]})})})]}),Object(ee.jsx)(x.a,{className:e.tableContainer,children:Object(ee.jsxs)(m.a,{className:e.table,"aria-label":"simple table",children:[Object(ee.jsx)(p.a,{className:e.tableHeaderCell,children:Object(ee.jsxs)(xe,{children:[Object(ee.jsx)(f.a,{children:" Name "}),Object(ee.jsx)(f.a,{children:" Frequency "}),Object(ee.jsx)(f.a,{align:"center",children:" Book Count "}),Object(ee.jsx)(f.a,{align:"center",children:" Registration Fee"}),Object(ee.jsx)(f.a,{align:"center",children:" Security Fee"}),Object(ee.jsx)(f.a,{align:"center",children:" Type"}),Object(ee.jsx)(f.a,{align:"center",children:" Status "}),Object(ee.jsx)(f.a,{align:"right",children:" Action "})]})}),Q?Object(ee.jsx)(y.a,{children:null===Q||void 0===Q?void 0:Q.map((function(i){return Object(ee.jsxs)(xe,{children:[Object(ee.jsxs)(f.a,{children:[" ",null===i||void 0===i?void 0:i.name," "]}),Object(ee.jsxs)(f.a,{children:[" ",null===i||void 0===i?void 0:i.frequency," "]}),Object(ee.jsxs)(f.a,{align:"center",children:[" ",null===i||void 0===i?void 0:i.booksCount," "]}),Object(ee.jsxs)(f.a,{align:"center",children:[" ",null===i||void 0===i?void 0:i.registrationFee," "]}),Object(ee.jsxs)(f.a,{align:"center",children:[" ",null===i||void 0===i?void 0:i.securityFee," "]}),Object(ee.jsxs)(f.a,{align:"center",children:[" ",null===i||void 0===i?void 0:i.type," "]}),Object(ee.jsx)(f.a,{align:"center",children:Object(ee.jsx)(g.a,{className:e.status,style:{backgroundColor:"ACTIVE"===(null===i||void 0===i?void 0:i.status)&&r.palette.success.main||"INACTIVE"===(null===i||void 0===i?void 0:i.status)&&r.palette.warning.dark},children:null===i||void 0===i?void 0:i.status})}),Object(ee.jsxs)(f.a,{align:"right",children:[Object(ee.jsx)(C.a,{title:"View Plan Options",children:Object(ee.jsx)(k.a,{onClick:function(){return e=i.id,void j.push("plans/".concat(e));var e},children:Object(ee.jsx)(de.a,{color:"primary",style:{cursor:"pointer"}})})}),("ADMIN"===(null===t||void 0===t?void 0:t.role)||"SUPER_ADMIN"===(null===t||void 0===t?void 0:t.role))&&Object(ee.jsx)(C.a,{title:"Update Plan",children:Object(ee.jsx)(k.a,{onClick:function(){return e=i,D(!0),void K(e);var e},children:Object(ee.jsx)(I.a,{color:"primary",style:{cursor:"pointer"}})})}),"SUPER_ADMIN"===(null===t||void 0===t?void 0:t.role)&&Object(ee.jsx)(C.a,{title:"Delete Plan",children:Object(ee.jsx)(k.a,{onClick:function(){te({isOpen:!0,title:"Delete Plan",subTitle:"Are you sure you want to delete ?",onConfirm:function(){!function(e,t){var i={name:null===t||void 0===t?void 0:t.name,frequency:null===t||void 0===t?void 0:t.frequency,booksCount:null===t||void 0===t?void 0:t.booksCount,registrationFee:null===t||void 0===t?void 0:t.registrationFee,securityFee:null===t||void 0===t?void 0:t.securityFee,type:null===t||void 0===t?void 0:t.type,schoolIds:null===t||void 0===t?void 0:t.schoolIds,status:"INACTIVE"};n(Object(l.t)(i,e,"Plan Deleted Successfully",(function(){n(Object(l.j)(U,A||"",R+1))}))),te(Object(c.a)(Object(c.a)({},$),{},{isOpen:!1}))}(i.id,i)}})},children:Object(ee.jsx)(ve.a,{color:"error",style:{cursor:"pointer"}})})})]})]},i.id)}))}):Object(ee.jsx)("caption",{style:{textAlign:"center"},children:" Sorry! No data available "})]})}),Object(ee.jsx)(N.a,{rowsPerPageOptions:[25,50,100],component:"div",count:(null===W||void 0===W?void 0:W.totalElements)||0,rowsPerPage:U,page:R,onPageChange:function(e,t){V(t)},onRowsPerPageChange:function(e){_(+e.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),w&&Object(ee.jsx)(oe,{isOpen:w,setOpen:D,isEditData:G}),$&&Object(ee.jsx)(he.a,{confirmDialog:$,setConfirmDialog:te})]})})}},941:function(e,t,n){"use strict";var c=n(3),i=n(6),a=n(2),o=n(0),l=n(218),s=n(220),r=n(348),d=n(48),j=n(1),u=Object(d.a)(Object(j.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),b=Object(d.a)(Object(j.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),O=Object(d.a)(Object(j.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),v=n(17),h=n(18),x=n(10),m=n(197),p=n(219);function f(e){return Object(m.a)("MuiCheckbox",e)}var y=Object(p.a)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),g=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],C=Object(x.a)(r.a,{shouldForwardProp:function(e){return Object(x.b)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat(Object(v.a)(n.color))]]}})((function(e){var t,n=e.theme,i=e.ownerState;return Object(a.a)({color:n.palette.text.secondary},!i.disableRipple&&{"&:hover":{backgroundColor:Object(s.a)("default"===i.color?n.palette.action.active:n.palette[i.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==i.color&&(t={},Object(c.a)(t,"&.".concat(y.checked,", &.").concat(y.indeterminate),{color:n.palette[i.color].main}),Object(c.a)(t,"&.".concat(y.disabled),{color:n.palette.action.disabled}),t))})),k=Object(j.jsx)(b,{}),N=Object(j.jsx)(u,{}),S=Object(j.jsx)(O,{}),P=o.forwardRef((function(e,t){var n,c,s=Object(h.a)({props:e,name:"MuiCheckbox"}),r=s.checkedIcon,d=void 0===r?k:r,u=s.color,b=void 0===u?"primary":u,O=s.icon,x=void 0===O?N:O,m=s.indeterminate,p=void 0!==m&&m,y=s.indeterminateIcon,P=void 0===y?S:y,I=s.inputProps,F=s.size,q=void 0===F?"medium":F,A=Object(i.a)(s,g),E=p?P:x,T=p?P:d,M=Object(a.a)({},s,{color:b,indeterminate:p,size:q}),w=function(e){var t=e.classes,n=e.indeterminate,c=e.color,i={root:["root",n&&"indeterminate","color".concat(Object(v.a)(c))]},o=Object(l.a)(i,f,t);return Object(a.a)({},t,o)}(M);return Object(j.jsx)(C,Object(a.a)({type:"checkbox",inputProps:Object(a.a)({"data-indeterminate":p},I),icon:o.cloneElement(E,{fontSize:null!=(n=E.props.fontSize)?n:q}),checkedIcon:o.cloneElement(T,{fontSize:null!=(c=T.props.fontSize)?c:q}),ownerState:M,ref:t},A,{classes:w}))}));t.a=P}}]);
//# sourceMappingURL=85.0cef8664.chunk.js.map