(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[88],{1112:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ue}));var i=n(16),l=n(28),c=n(7),s=n(0),a=n(21),o=n(11),r=n(9),d=n(5),u=function(e){return{type:d.hb,error:e}},j=function(e,t){return function(n){try{Object(o.a)("https://prodservice.bookeinstein.com","POST","subscriptions-service/discount",e,!0).then((function(e){e&&(n(Object(r.b)(null===e||void 0===e?void 0:e.message)),t&&t(e))})).catch((function(e){var t;console.log(e),n(Object(r.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message))}))}catch(i){console.log(i)}}},b=function(e,t,n){return function(i){try{Object(o.a)("https://prodservice.bookeinstein.com","PUT","subscriptions-service/discount/".concat(t),e,!0).then((function(e){e&&(i(Object(r.b)(null===e||void 0===e?void 0:e.message)),n&&n(e))})).catch((function(e){var t;console.log(e),i(Object(r.b)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message))}))}catch(l){console.log(l)}}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t({type:d.ib});try{Object(o.a)("https://prodservice.bookeinstein.com","GET","subscriptions-service/discount?searchKey=".concat(e,"&pageNumber=1&pageSize=20"),!0).then((function(e){t(function(e){return{type:d.jb,payload:e}}({allDiscounts:e}))})).catch((function(e){t(u(e)),t(Object(r.b)(null===e||void 0===e?void 0:e.message))}))}catch(n){t(u("Something went wrong"))}}},O=n(54),m=n(750),p=n(745),x=n(222),h=n(20),f=n(65),y=n(223),g=n(119),N=n(746),D=n(747),T=n(748),P=n(113),S=n(749),A=n(742),L=n(346),E=n(738),U=n(26),C=n(288),M=n.n(C),I=n(96),q=n.n(I),k=n(62),w=n(4),F=n(43),R=n(85),V=n(34),B=n(38),G=n(64),z=n.n(G),_=n(349),J=n(740),H=n(898),K=n(158),W=n(741),Y=n(899),Q=n(735),X=n(343),Z=n(900),$=n(140),ee=n(730),te=n(42),ne=n.n(te),ie=n(1),le=[{id:1,status:"GLOBAL"},{id:2,status:"LIBRARY_PLAN"},{id:3,status:"ONLINE_CLASS"},{id:4,status:"PLAN"},{id:5,status:"MODULE"},{id:6,status:"USER"}],ce=[{id:1,status:"PERCENTAGE"},{id:2,status:"AMOUNT"}],se=B.d({code:B.f("Enter Title").required("Code is required").trim(),description:B.f("Enter description").required("Description is required").trim(),levelType:B.f("Enter Level").required("Level is required"),maxLimitPerUserProfile:B.f("Enter user limit").required("User limit is required"),type:B.f("Enter Type").required("Type is required"),value:B.f("Enter Value").required("Value is required"),minAmount:B.f("Enter Min amount").required("Min amount is required"),startDate:B.f("Enter start date here").required("Start date is required"),endDate:B.f("Enter end date here").required("End date is required")});function ae(e){var t=e.openAddDiscounts,n=e.setOpenAddDiscounts,i=e.isEditData,l=e.allModule,o=e.allPlans;console.log(o);var r=Object($.a)(),d=Object(a.b)(),u=Object(s.useState)(!1),O=Object(c.a)(u,2),m=O[0],p=(O[1],Object(a.c)((function(e){return null===e||void 0===e?void 0:e.addUser})).getSearchedProfileData),x=Object(s.useState)(),f=Object(c.a)(x,2),y=f[0],N=f[1],D=Object(s.useState)([]),T=Object(c.a)(D,2),P=(T[0],T[1],Object(s.useState)([])),S=Object(c.a)(P,2);S[0],S[1];console.log("final---",y);var A=function(e){console.log(e),N(e)},L={code:(null===i||void 0===i?void 0:i.code)||"",description:(null===i||void 0===i?void 0:i.description)||"",levelType:(null===i||void 0===i?void 0:i.levelType)||"GLOBAL",levelTypeIds:(null===i||void 0===i?void 0:i.levelTypeIds)||"",maxLimitPerUserProfile:(null===i||void 0===i?void 0:i.maxLimitPerUserProfile)||"",type:(null===i||void 0===i?void 0:i.type)||"PERCENTAGE",value:(null===i||void 0===i?void 0:i.value)||"",minAmount:(null===i||void 0===i?void 0:i.minAmount)||"",startDate:(null===i||void 0===i?void 0:i.startDate)||"",endDate:(null===i||void 0===i?void 0:i.endDate)||""},E=Object(F.f)({mode:"onChange",resolver:Object(R.a)(se),defaultValues:L}),U=E.reset,C=E.handleSubmit,M=(0,E.watch)("levelType"),I=function(){n(!1),U()};return Object(s.useEffect)((function(){if(p&&"USER"===(null===i||void 0===i?void 0:i.levelType)){var e=null===p||void 0===p?void 0:p.filter((function(e){var t;return null===i||void 0===i||null===(t=i.levelTypeIds)||void 0===t?void 0:t.includes(e.userId)}));N(e)}if(p&&"MODULE"===(null===i||void 0===i?void 0:i.levelType)){var t=null===l||void 0===l?void 0:l.filter((function(e){var t;return null===i||void 0===i||null===(t=i.levelTypeIds)||void 0===t?void 0:t.includes(e.id)}));N(t)}if(p&&"PLAN"===(null===i||void 0===i?void 0:i.levelType)){var n=null===o||void 0===o?void 0:o.filter((function(e){var t;return null===i||void 0===i||null===(t=i.levelTypeIds)||void 0===t?void 0:t.includes(e.id)}));N(n)}}),[p,l,o]),Object(ie.jsxs)("div",{children:[Object(ie.jsxs)(J.a,{open:t,maxWidth:"md",children:[Object(ie.jsx)(H.a,{className:r.dialogTitle,children:Object(ie.jsxs)("div",{className:r.dialogTitleChild,children:[Object(ie.jsx)(K.a,{style:{fontSize:"20px"},children:i?"Update Discount":"Add Discount"}),Object(ie.jsx)(W.a,{to:"#",onClick:I,children:Object(ie.jsx)(z.a,{className:r.closeIcon})})]})}),Object(ie.jsxs)(V.a,{methods:E,onSubmit:C((function(e){var t,n,c,s=[],a=[];"PLAN"===(null===e||void 0===e?void 0:e.levelType)&&(null===o||void 0===o||o.map((function(e){return s.push[e.id]})),a=null===y||void 0===y||null===(t=y.filter((function(e){return e.id})))||void 0===t?void 0:t.map((function(e){return e.id})));"MODULE"===(null===e||void 0===e?void 0:e.levelType)&&(null===l||void 0===l||l.map((function(e){return s.push[e.id]})),a=null===y||void 0===y||null===(n=y.filter((function(e){return e.id})))||void 0===n?void 0:n.map((function(e){return e.id})));"USER"===(null===e||void 0===e?void 0:e.levelType)&&(null===y||void 0===y||y.map((function(e){return s.push[e.userId]})),a=null===y||void 0===y||null===(c=y.filter((function(e){return e.userId})))||void 0===c?void 0:c.map((function(e){return e.userId})));console.log("arrrr--",s),console.log("result--",a);var r=[];if("PLAN"===(null===e||void 0===e?void 0:e.levelType)||"MODULE"===(null===e||void 0===e?void 0:e.levelType)||"USER"===(null===e||void 0===e?void 0:e.levelType)){var u={code:null===e||void 0===e?void 0:e.code,description:null===e||void 0===e?void 0:e.description,levelType:null===e||void 0===e?void 0:e.levelType,levelTypeIds:a,maxLimitPerUserProfile:null===e||void 0===e?void 0:e.maxLimitPerUserProfile,type:null===e||void 0===e?void 0:e.type,value:null===e||void 0===e?void 0:e.value,minAmount:null===e||void 0===e?void 0:e.minAmount,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate};r.push(u)}else{var O={code:null===e||void 0===e?void 0:e.code,description:null===e||void 0===e?void 0:e.description,levelType:null===e||void 0===e?void 0:e.levelType,maxLimitPerUserProfile:null===e||void 0===e?void 0:e.maxLimitPerUserProfile,type:null===e||void 0===e?void 0:e.type,value:null===e||void 0===e?void 0:e.value,minAmount:null===e||void 0===e?void 0:e.minAmount,startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate};r.push(O)}var m=r[0];console.log("payload--",m),d(i?b(m,i.id,(function(){d(v()),I()})):j(m,(function(){d(v()),I()})))})),children:[Object(ie.jsx)(Y.a,{children:Object(ie.jsx)(h.a,{container:!0,children:Object(ie.jsx)(h.a,{item:!0,xs:12,children:Object(ie.jsxs)(h.a,{container:!0,spacing:2,children:[Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Code ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(V.d,{name:"code",placeholder:"Code here",className:r.textField,autoFocus:!0})]}),Object(ie.jsx)("br",{})," ",Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Description ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(V.d,{name:"description",placeholder:"Code here",className:r.textField})]}),Object(ie.jsx)("br",{})," ",Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Level Type ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(V.c,{name:"levelType",label:"",children:null===le||void 0===le?void 0:le.map((function(e,t){return Object(ie.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),("PLAN"===M||"MODULE"===M||"USER"===M)&&Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:["USER"===M&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("label",{children:["Select Users ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(Q.a,{multiple:!0,id:"tags-outlined",options:p,getOptionLabel:function(e){return e.emailFirstNameLastName},filterSelectedOptions:!0,renderInput:function(e){return Object(ie.jsx)(ee.a,Object(w.a)(Object(w.a)({},e),{},{placeholder:"Select Users"}))},value:y,onChange:function(e,t){A(t)}})]}),"MODULE"===M&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("label",{children:["Select Module ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(Q.a,{multiple:!0,id:"tags-outlined",options:l,getOptionLabel:function(e){return e.title},filterSelectedOptions:!0,renderInput:function(e){return Object(ie.jsx)(ee.a,Object(w.a)(Object(w.a)({},e),{},{placeholder:"Select Module"}))},value:y,onChange:function(e,t){A(t)}})]}),"PLAN"===M&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("label",{children:["Select Plan ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(Q.a,{multiple:!0,id:"tags-outlined",options:o,name:"levelTypeIds",getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return Object(ie.jsx)(ee.a,Object(w.a)(Object(w.a)({},e),{},{placeholder:"Select Module"}))},value:y,onChange:function(e,t){A(t)}})]})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Max Limit (Per User) ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(V.d,{name:"maxLimitPerUserProfile",placeholder:"Per profile limit here",className:r.textField})]}),Object(ie.jsx)("br",{})," ",Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Type ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(V.c,{name:"type",label:"",children:null===ce||void 0===ce?void 0:ce.map((function(e,t){return Object(ie.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Value ",Object(ie.jsx)("span",{className:r.mandatory,children:"*"})]}),Object(ie.jsx)(V.d,{name:"value",placeholder:"Value here",className:r.textField})]}),Object(ie.jsx)("br",{})," ",Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsxs)("label",{children:["Min Subscription Amount ",Object(ie.jsx)("span",{className:r.mandatory,children:" * "})]}),Object(ie.jsx)(V.d,{name:"minAmount",placeholder:"Min amount here",className:r.textField})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsx)("label",{children:" Start(Date) "}),Object(ie.jsx)(V.d,{name:"startDate",type:"date",placeholder:"Start date here",className:r.textField})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)(h.a,{item:!0,xs:12,sm:6,children:[Object(ie.jsx)("label",{children:" End(Date)"}),Object(ie.jsx)(V.d,{name:"endDate",type:"date",placeholder:"End date here",className:r.textField})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{})]})})})}),Object(ie.jsx)(X.a,{style:{marginTop:15}}),Object(ie.jsxs)(Z.a,{className:r.dialogAction,children:[Object(ie.jsx)(g.a,{variant:"outlined",color:"secondary",className:r.buttonCancel,onClick:I,children:"Close"}),Object(ie.jsx)(g.a,{variant:"contained",type:"submit",color:"primary",className:r.buttonSubmit,children:i?"Update":"Add"})]})]})]}),Object(ie.jsx)("span",{className:r.loader,children:m?Object(_.a)():""})]})}var oe=n(46),re=n(291),de=Object(m.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(p.a);function ue(){var e,t=Object(k.a)();Object(oe.a)({roleList:["ADMIN","SUPER_ADMIN"]});var n=Object(a.b)(),o=Object(s.useState)(""),r=Object(c.a)(o,2),d=r[0],u=r[1],j=Object(s.useState)(!1),b=Object(c.a)(j,2),m=b[0],p=b[1],C=Object(s.useState)(0),I=Object(c.a)(C,2),w=I[0],F=I[1],R=Object(s.useState)(25),V=Object(c.a)(R,2),B=V[0],G=V[1],z=Object(s.useState)(null),_=Object(c.a)(z,2),J=_[0],H=_[1],K=Object(a.c)((function(e){return null===e||void 0===e?void 0:e.discount})).allDiscounts,W=null===K||void 0===K?void 0:K.content,Y=Object(s.useState)([]),Q=Object(c.a)(Y,2),X=Q[0],Z=Q[1],$=Object(s.useState)([]),ee=Object(c.a)($,2),te=ee[0],le=ee[1],ce=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("".concat("https://prodservice.bookeinstein.com","/subscriptions-service/modules/search")).then((function(e){200===e.status&&Z(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("".concat("https://prodservice.bookeinstein.com","/subscriptions-service/plans/search")).then((function(e){200===e.status&&le(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){n(v(d||""))}),[d]),Object(s.useEffect)((function(){n(Object(re.j)("","STUDENT")),ce(),se()}),[]),Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)(O.a,{children:[Object(ie.jsxs)("div",{className:t.titleContainer,children:[Object(ie.jsx)(q.a,{className:t.viewIcon}),Object(ie.jsx)("span",{className:t.pageTitle,children:"\xa0 All Discounts "})]}),Object(ie.jsxs)(x.a,{elevation:5,className:t.root,children:[Object(ie.jsxs)(h.a,{container:!0,spacing:3,style:{display:"flex",justifyContent:"space-between"},children:[Object(ie.jsx)(h.a,{item:!0,xs:12,sm:6,md:6,children:Object(ie.jsx)("div",{children:Object(ie.jsx)(f.a,{label:"hello",className:t.searchControl,id:"input-search-header",value:d,onChange:function(e){return u(e.target.value)},placeholder:"Search on Type",startAdornment:Object(ie.jsx)(y.a,{position:"start",children:Object(ie.jsx)(U.U,{stroke:1.5,size:"1rem",className:t.startAdornment})})})})}),Object(ie.jsx)(h.a,{item:!0,xs:12,sm:6,md:6,children:Object(ie.jsx)("div",{className:t.btn,children:Object(ie.jsx)(g.a,{variant:"contained",onClick:function(){p(!0),H(null)},className:t.btnAdd,children:"Add Discount"})})})]}),Object(ie.jsx)(N.a,{className:t.tableContainer,children:Object(ie.jsxs)(D.a,{className:t.table,"aria-label":"simple table",children:[Object(ie.jsx)(T.a,{className:t.tableHeaderCell,children:Object(ie.jsxs)(de,{children:[Object(ie.jsx)(P.a,{children:" Code "}),Object(ie.jsx)(P.a,{children:" Description "}),Object(ie.jsx)(P.a,{children:" Level Type "}),Object(ie.jsx)(P.a,{children:" Max Limit (Per User) "}),Object(ie.jsx)(P.a,{children:" Type "}),Object(ie.jsx)(P.a,{children:" Value "}),Object(ie.jsx)(P.a,{children:" Min Subscription Amount "}),Object(ie.jsx)(P.a,{width:"10%",children:" Start Date "}),Object(ie.jsx)(P.a,{width:"10%",children:" End Date "}),Object(ie.jsx)(P.a,{children:" Action "})]})}),W?Object(ie.jsx)(S.a,{children:null===W||void 0===W||null===(e=W.slice(w*B,w*B+B))||void 0===e?void 0:e.map((function(e,t){return Object(ie.jsxs)(de,{children:[Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.code," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.description," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.levelType," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.maxLimitPerUserProfile," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.type," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.value," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.minAmount," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.startDate," "]}),Object(ie.jsxs)(P.a,{children:[" ",null===e||void 0===e?void 0:e.endDate," "]}),Object(ie.jsx)(P.a,{children:Object(ie.jsx)(A.a,{title:"Update Discount",children:Object(ie.jsx)(L.a,{onClick:function(){return t=e,p(!0),void H(t);var t},children:Object(ie.jsx)(M.a,{color:"primary",style:{cursor:"pointer"}})})})})]},t)}))}):Object(ie.jsx)("caption",{style:{textAlign:"center"},children:"Sorry! No data available"})]})}),Object(ie.jsx)(E.a,{rowsPerPageOptions:[25,50,100],component:"div",count:(null===W||void 0===W?void 0:W.length)||0,rowsPerPage:B,page:w,onPageChange:function(e,t){F(t)},onRowsPerPageChange:function(e){G(+e.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),m&&Object(ie.jsx)(ae,{openAddDiscounts:m,setOpenAddDiscounts:p,isEditData:J,allModule:X,allPlans:te})]})})}}}]);
//# sourceMappingURL=88.3dad07d3.chunk.js.map