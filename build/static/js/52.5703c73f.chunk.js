(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[52],{1122:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var c=n(16),a=n(28),i=n(7),o=n(0),r=n(21),s=n(54),l=n(750),d=n(745),u=n(222),j=n(20),b=n(65),O=n(223),h=n(119),p=n(477),v=n(746),m=n(747),x=n(748),f=n(113),g=n(749),S=n(742),y=n(346),k=n(738),N=n(26),C=n(96),w=n.n(C),I=n(970),P=n(141),D=n.n(P),E=n(40),A=n(8),T=n(62),L=(n(291),n(46)),B=n(11),R=function(e,t,n){return new Promise((function(c,a){Object(B.a)("https://prodservice.bookeinstein.com","GET","subscriptions-service/plan-subscriptions/active?pageNumber=".concat(e||1,"&pageSize=").concat(t||30,"&searchKey=").concat(n||""),!0).then((function(e){c(e)})).catch((function(e){a(e)}))}))},U=n(1),z=Object(l.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(d.a);function M(){var e;Object(L.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var t=Object(o.useState)([]),n=Object(i.a)(t,2),l=n[0],d=(n[1],Object(o.useState)(!0)),C=Object(i.a)(d,2),P=C[0],B=C[1],M=Object(T.a)(),V=(Object(r.b)(),Object(E.g)()),G=Object(o.useState)(!1),J=Object(i.a)(G,2),_=J[0],q=J[1],F=Object(o.useState)(0),H=Object(i.a)(F,2),K=H[0],W=H[1],Y=Object(o.useState)(25),Q=Object(i.a)(Y,2),X=Q[0],Z=Q[1],$=Object(o.useState)(null),ee=Object(i.a)($,2),te=ee[0],ne=(ee[1],Object(r.c)((function(e){return null===e||void 0===e?void 0:e.order})).allOrderData,Object(o.useState)(!1)),ce=Object(i.a)(ne,2),ae=ce[0],ie=ce[1],oe=Object(o.useState)(""),re=Object(i.a)(oe,2),se=re[0],le=re[1],de=Object(o.useState)([]),ue=Object(i.a)(de,2),je=ue[0],be=ue[1],Oe=Object(o.useState)(""),he=Object(i.a)(Oe,2),pe=he[0],ve=he[1],me=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t,n,a){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,R(t,n,a).then((function(e){be(e),le(null===e||void 0===e?void 0:e.totalElements)})).catch((function(e){console.log(e)})).finally((function(){B(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){me(K+1,X,pe)}),[K,X,pe]),Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(s.a,{children:[Object(U.jsxs)("div",{className:M.titleContainer,children:[Object(U.jsx)(w.a,{className:M.viewIcon}),Object(U.jsx)("span",{className:M.pageTitle,children:"\xa0 All Users With Library Subscription "})]}),Object(U.jsxs)(u.a,{elevation:5,className:M.root,children:[Object(U.jsxs)(j.a,{container:!0,spacing:3,style:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)(j.a,{item:!0,xs:12,sm:6,md:6,children:Object(U.jsx)("div",{children:Object(U.jsx)(b.a,{className:M.searchControl,id:"input-search-header",onChange:function(e){var t;return ve(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},placeholder:"Search",startAdornment:Object(U.jsx)(O.a,{position:"start",children:Object(U.jsx)(N.U,{stroke:1.5,size:"1rem",className:M.startAdornment})})})})}),Object(U.jsx)(j.a,{item:!0,xs:12,sm:2,md:2,children:Object(U.jsx)(h.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9",height:"37px"},className:M.btn,onClick:function(e){return ve("pending")},children:"Pending Weeks"})}),Object(U.jsx)(j.a,{item:!0,xs:12,sm:2,md:2,children:Object(U.jsx)(h.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9",height:"37px"},onClick:function(e){return ve("active")},children:"Active Plans"})}),Object(U.jsx)(j.a,{item:!0,xs:12,sm:2,md:2,children:Object(U.jsx)(h.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9",height:"37px"},onClick:function(e){return ve("completed")},children:"Completed Plans"})})]}),P?Object(U.jsx)("div",{className:M.progressContainer,colSpan:9,align:"center",children:Object(U.jsx)(p.a,{})}):Object(U.jsx)(v.a,{className:M.tableContainer,children:Object(U.jsxs)(m.a,{className:M.table,"aria-label":"simple table",children:[Object(U.jsx)(x.a,{className:M.tableHeaderCell,children:Object(U.jsxs)(z,{children:[Object(U.jsx)(f.a,{children:" Cus ID "}),Object(U.jsx)(f.a,{children:" Email "}),Object(U.jsx)(f.a,{children:" Phone no "}),Object(U.jsx)(f.a,{children:" Full Name "}),Object(U.jsx)(f.a,{children:" School Name "}),Object(U.jsx)(f.a,{align:"right",children:" Actions "})]})}),null!==je&&void 0!==je&&je.content?Object(U.jsx)(g.a,{children:null===je||void 0===je||null===(e=je.content)||void 0===e?void 0:e.map((function(e,t){var n;n=null===e||void 0===e?void 0:e.orderId,l.indexOf(n),"enhanced-table-checkbox-".concat(t);return Object(U.jsxs)(z,{children:[Object(U.jsxs)(f.a,{children:[" ",null===e||void 0===e?void 0:e.profileId," "]}),Object(U.jsxs)(f.a,{children:[" ",null===e||void 0===e?void 0:e.email," "]}),Object(U.jsxs)(f.a,{children:[" ",null===e||void 0===e?void 0:e.mobile," "]}),Object(U.jsxs)(f.a,{children:[" ",null===e||void 0===e?void 0:e.fullName," "]}),Object(U.jsxs)(f.a,{children:[" ",null===e||void 0===e?void 0:e.schoolName," "]}),Object(U.jsx)(f.a,{align:"right",children:Object(U.jsx)(S.a,{title:"View Delivery Plan","aria-label":"View Order",children:Object(U.jsx)(A.b,{to:"/admin/orders/delivery-plan/".concat(null===e||void 0===e?void 0:e.subscriptionId),children:Object(U.jsx)(y.a,{onClick:function(){return t=null===e||void 0===e?void 0:e.subscriptionId,void V.push("/admin/orders/delivery-plan/".concat(t));var t},children:Object(U.jsx)(D.a,{color:"primary",style:{cursor:"pointer"}})})})})})]},t)}))}):Object(U.jsx)("caption",{style:{textAlign:"center"},children:" Sorry! No data available "})]})}),Object(U.jsx)(k.a,{rowsPerPageOptions:[25,50,100],component:"div",count:se||0,rowsPerPage:X,page:K,onPageChange:function(e,t){W(t)},onRowsPerPageChange:function(e){Z(+e.target.value)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),_&&Object(U.jsx)(I.a,{isOpen:_,setOpen:q,orderId:te,isBulk:!1}),ae&&Object(U.jsx)(I.a,{isOpen:ae,setOpen:ie,orderId:l,isBulk:!0})]})})}},938:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s}));var c=n(11),a=n(9),i=n(5),o=function(e){return{type:i.xd,error:e}},r=function(e){return{type:i.J,error:e}},s=function(e){return function(t){try{Object(c.a)("https://prodservice.bookeinstein.com","POST","orders-service/bulk/book/return",e,!0).then((function(e){t(Object(a.b)(null===e||void 0===e?void 0:e.message))})).catch((function(e){console.log(e)}))}catch(n){console.log(n)}}},l=function(e,t){return function(n){try{Object(c.a)("https://prodservice.bookeinstein.com","PUT","orders-service/bulk/order/status",e,!0).then((function(e){n(Object(a.b)(null===e||void 0===e?void 0:e.message)),t&&t(e)})).catch((function(e){console.log(e)}))}catch(i){console.log(i)}}},d=function(e){return function(t){t({type:i.yd});try{Object(c.a)("https://prodservice.bookeinstein.com","GET","orders-service/bulk/".concat(e),!0).then((function(e){t(function(e){return{type:i.zd,payload:e}}({bulkData:e}))})).catch((function(e){t(o(e))}))}catch(n){t(o("Something went wrong"))}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){n({type:i.K});try{Object(c.a)("https://prodservice.bookeinstein.com","GET","orders-service/bulk?pageNumber=".concat(t,"&pageSize=").concat(e),!0).then((function(e){n(function(e){return{type:i.L,payload:e}}({allBulkData:e}))})).catch((function(e){n(r(e))}))}catch(a){n(r("Something went wrong"))}}}},970:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var c=n(7),a=n(0),i=n(43),o=n(38),r=n(85),s=n(64),l=n.n(s),d=n(21),u=n(140),j=n(175),b=n(938),O=n(34),h=n(740),p=n(898),v=n(158),m=n(741),x=n(899),f=n(20),g=n(343),S=n(900),y=n(119),k=n(1),N=[{id:0,status:"DELIVERED"},{id:1,status:"CANCELLED"},{id:2,status:"PARTIALLY_DELIVERED"}],C=o.d({orderStatus:o.f().required("Order Status is required")});function w(e){var t=e.isOpen,n=e.setOpen,o=e.orderId,s=e.isBulk,w=Object(u.a)(),I=Object(d.b)(),P=Object(a.useState)((new Date).toISOString().substring(0,10)),D=Object(c.a)(P,2),E=D[0],A=(D[1],Object(a.useState)((new Date).toISOString().substring(0,10))),T=Object(c.a)(A,2),L=T[0],B=(T[1],Object(i.f)({mode:"onChange",resolver:Object(r.a)(C),defaultValues:{orderStatus:""}})),R=B.reset,U=B.handleSubmit,z=function(){n(!1),R()};return Object(k.jsx)("div",{children:Object(k.jsxs)(h.a,{open:t,classes:{paper:w.dialog},children:[Object(k.jsx)(p.a,{className:w.dialogTitle,children:Object(k.jsxs)("div",{className:w.dialogTitleChild,children:[Object(k.jsx)(v.a,{style:{fontSize:"20px"},children:"Update Order Status"}),Object(k.jsx)(m.a,{to:"#",onClick:z,children:Object(k.jsx)(l.a,{className:w.closeIcon})})]})}),Object(k.jsxs)(O.a,{methods:B,onSubmit:U((function(e){if(s){var t={status:null===e||void 0===e?void 0:e.orderStatus,orderIds:o};I(Object(b.b)(t,(function(){z(),I(Object(j.a)("",E,L,(function(){})))}))),z()}else I(Object(j.j)(o,null===e||void 0===e?void 0:e.orderStatus,(function(){I(Object(j.a)("",E,L,(function(){}))),z()})))})),children:[Object(k.jsx)(x.a,{children:Object(k.jsx)(f.a,{container:!0,children:Object(k.jsxs)(f.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{children:["Status",Object(k.jsx)("span",{className:w.mandatory,children:"*"})]}),Object(k.jsxs)(O.c,{name:"orderStatus",label:"",children:[Object(k.jsx)("option",{value:"",children:"Select Status"}),null===N||void 0===N?void 0:N.map((function(e,t){return Object(k.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))]})]})})}),Object(k.jsx)(g.a,{style:{marginTop:15}}),Object(k.jsxs)(S.a,{className:w.dialogAction,children:[Object(k.jsx)(y.a,{variant:"outlined",color:"secondary",className:w.buttonCancel,onClick:z,children:"Close"}),Object(k.jsx)(y.a,{variant:"contained",type:"submit",className:w.buttonSubmit,children:"Update"})]})]})]})})}}}]);
//# sourceMappingURL=52.5703c73f.chunk.js.map