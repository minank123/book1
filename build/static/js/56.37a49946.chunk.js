(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[56],{1120:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return K}));var a=n(16),i=n(28),c=n(7),l=n(66),o=n(750),r=n(26),s=n(96),d=n.n(s),j=n(62),b=n(745),u=n(222),O=n(20),v=n(65),h=n(223),x=n(119),p=n(344),m=n(477),g=n(746),f=n(747),y=n(748),S=n(113),C=n(749),w=n(158),N=n(742),I=n(346),P=n(738),k=n(21),L=n(141),D=n.n(L),A=(n(949),n(54)),E=n(46),T=n(0),M=n(174),_=n(360),B=n(740),z=n(898),H=n(741),R=n(899),U=n(343),F=n(900),V=n(64),X=n.n(V),q=n(892),J=n(1),Y=Object(o.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(b.a);function W(e){var t,n,a=e.open,i=e.close,o=e.data,r=Object(T.useState)(0),s=Object(c.a)(r,2),d=s[0],u=s[1],O=Object(T.useState)(25),v=Object(c.a)(O,2),h=v[0],p=v[1],m=Object(j.a)(),N=Object(l.g)(),I=function(){i(!1)};return Object(J.jsx)("div",{children:Object(J.jsxs)(B.a,{open:a,maxWidth:"md",children:[Object(J.jsx)(z.a,{className:m.dialogTitle,children:Object(J.jsxs)("div",{className:m.dialogTitleChild,children:[Object(J.jsx)(w.a,{style:{fontSize:"px"},children:"Subscription History"}),Object(J.jsx)(H.a,{to:"#",onClick:I,style:{fontSize:"16px"},children:Object(J.jsx)(X.a,{className:m.closeIcon})})]})}),Object(J.jsxs)(R.a,{style:{maxHeight:"350px"},children:[Object(J.jsx)(q.a,{container:!0,children:Object(J.jsx)(g.a,{children:Object(J.jsxs)(f.a,{"aria-label":"simple table",children:[Object(J.jsx)(y.a,{className:m.tableHeaderCell,children:Object(J.jsxs)(Y,{children:[Object(J.jsx)(S.a,{align:"center",children:" Plan Name "}),Object(J.jsx)(S.a,{align:"center",children:" Plan Option Type "}),Object(J.jsx)(S.a,{align:"center",children:" Plan Frequency "}),Object(J.jsx)(S.a,{align:"center",children:" Book Count "}),Object(J.jsx)(S.a,{align:"center",children:" Start Date "}),Object(J.jsx)(S.a,{align:"center",children:" End Date "}),Object(J.jsx)(S.a,{align:"center",children:" Status "})]})}),0===(null===o||void 0===o||null===(t=o.content)||void 0===t?void 0:t.length)?Object(J.jsx)("caption",{style:{textAlign:"center"},children:" Sorry! No data available "}):Object(J.jsx)(C.a,{children:null===o||void 0===o||null===(n=o.content)||void 0===n?void 0:n.map((function(e){var t,n,a,i;return Object(J.jsxs)(b.a,{children:[Object(J.jsx)(S.a,{align:"center",children:null===e||void 0===e||null===(t=e.planLimitedInfo)||void 0===t?void 0:t.name}),Object(J.jsx)(S.a,{align:"center",children:null===e||void 0===e||null===(n=e.planOptionLimitedInfo)||void 0===n?void 0:n.type}),Object(J.jsx)(S.a,{align:"center",children:null===e||void 0===e||null===(a=e.planLimitedInfo)||void 0===a?void 0:a.frequency}),Object(J.jsx)(S.a,{align:"center",children:null===e||void 0===e||null===(i=e.planLimitedInfo)||void 0===i?void 0:i.booksCount}),Object(J.jsx)(S.a,{align:"center",children:e.startDate}),Object(J.jsx)(S.a,{align:"center",children:e.endDate}),Object(J.jsx)(S.a,{align:"center",children:Object(J.jsx)(w.a,{className:m.status,style:{backgroundColor:"ACTIVE"===(null===e||void 0===e?void 0:e.status)?N.palette.success.main:N.palette.warning.dark},children:null===e||void 0===e?void 0:e.status})})]},null===e||void 0===e?void 0:e.id)}))})]})})}),Object(J.jsx)(P.a,{rowsPerPageOptions:[25,50,100],component:"div",count:o.totalElements,rowsPerPage:h,page:d,onPageChange:function(e,t){u(t)},onRowsPerPageChange:function(e){p(+e.target.value)}})]}),Object(J.jsx)(U.a,{style:{marginTop:15}}),Object(J.jsx)(F.a,{className:m.dialogAction,children:Object(J.jsx)(x.a,{variant:"outlined",color:"primary",className:m.buttonCancel,onClick:I,children:"Close"})})]})})}var G=Object(o.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(b.a);function K(){var e=Object(j.a)();Object(E.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var t=Object(k.c)((function(e){return null===e||void 0===e?void 0:e.userProfile})).loggedUserProfile,n=Object(k.b)(),o=Object(l.g)(),s=Object(T.useState)(""),b=Object(c.a)(s,2),L=b[0],B=(b[1],Object(T.useState)("")),z=Object(c.a)(B,2),H=z[0],R=z[1],U=Object(T.useState)(0),F=Object(c.a)(U,2),V=F[0],X=F[1],q=Object(T.useState)(25),Y=Object(c.a)(q,2),K=Y[0],Q=Y[1],Z=Object(T.useState)(""),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ne=Object(T.useState)(!1),ae=Object(c.a)(ne,2),ie=ae[0],ce=(ae[1],Object(T.useState)([])),le=Object(c.a)(ce,2),oe=le[0],re=le[1],se=Object(T.useState)(!1),de=Object(c.a)(se,2),je=de[0],be=de[1],ue=Object(k.c)((function(e){return null===e||void 0===e?void 0:e.subscriptions})).allSubscription,Oe=null===ue||void 0===ue?void 0:ue.content,ve=function(e){te(e)};Object(T.useEffect)((function(){n(Object(M.h)(H||"",V+1,K,L||"",ee||""))}),[H,K,V,L,ee]);var he=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)(t);case 3:n=e.sent,console.log("sub history===",null===n||void 0===n?void 0:n.data),re(null===n||void 0===n?void 0:n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:be(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(A.a,{children:[Object(J.jsxs)("div",{className:e.titleContainer,children:[Object(J.jsx)(d.a,{className:e.viewIcon}),Object(J.jsx)("span",{className:e.pageTitle,children:"\xa0 Library Subscriptions Expired Or About To Expire "})]}),Object(J.jsxs)(u.a,{elevation:5,className:e.root,children:[Object(J.jsxs)(O.a,{container:!0,spacing:2,justifyContent:"space-between",alignItems:"center",children:[Object(J.jsx)(O.a,{item:!0,xs:12,sm:4,md:4,children:Object(J.jsx)("div",{children:Object(J.jsx)(v.a,{className:e.searchControl,id:"input-search-header",value:H,onChange:function(e){var t;R(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value),X(0)},placeholder:"Search",startAdornment:Object(J.jsx)(h.a,{position:"start",children:Object(J.jsx)(r.U,{stroke:1.5,size:"1rem",className:e.startAdornment})}),style:{width:"100%"}})})}),Object(J.jsxs)(O.a,{item:!0,xs:12,sm:4,md:4,container:!0,justifyContent:"space-between",children:[Object(J.jsx)(x.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9",marginBottom:"10px",width:"48%"},onClick:function(){return ve("LAST_30_DAYS")},children:"Expired"}),Object(J.jsx)(x.a,{variant:"contained",color:"primary",style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9",marginBottom:"10px",width:"48%"},onClick:function(){return ve("NEXT_30_DAYS")},children:"To Expire"})]}),Object(J.jsx)(O.a,{item:!0,xs:12,container:!0,justifyContent:"center",children:ie&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h7",{children:"Downloading..."})," ",Object(J.jsx)(p.a,{sx:{display:"flex",justifyContent:"center"},children:Object(J.jsx)(m.a,{})})]})})]}),Object(J.jsx)(g.a,{className:e.tableContainer,style:{overflowX:"auto"},children:Object(J.jsxs)(f.a,{className:e.table,"aria-label":"simple table",children:[Object(J.jsx)(y.a,{className:e.tableHeaderCell,children:Object(J.jsxs)(G,{children:[Object(J.jsx)(S.a,{align:"center",children:" FullName(CUS Id) "}),Object(J.jsx)(S.a,{align:"center",children:" Plan Title "}),Object(J.jsx)(S.a,{align:"center",children:" Email "}),Object(J.jsx)(S.a,{align:"center",children:" Mobile "}),Object(J.jsx)(S.a,{align:"center",children:" Start Date "}),Object(J.jsx)(S.a,{align:"center",children:" End Date "}),Object(J.jsx)(S.a,{align:"center",children:" Status "}),Object(J.jsx)(S.a,{align:"center",children:" Subscription Details "})]})}),Oe?Object(J.jsx)(C.a,{children:null===Oe||void 0===Oe?void 0:Oe.map((function(n,a){var i,c,l,r,s,d;return Object(J.jsxs)(G,{children:[Object(J.jsxs)(S.a,{align:"center",children:[null===n||void 0===n||null===(i=n.userLimitedInfo)||void 0===i?void 0:i.fullName.toLowerCase(),"(",null===n||void 0===n||null===(c=n.userLimitedInfo)||void 0===c?void 0:c.profileId,")"]}),Object(J.jsxs)(S.a,{align:"center",children:[null===n||void 0===n||null===(l=n.planLimitedInfo)||void 0===l?void 0:l.booksCount,"B X ",null===n||void 0===n||null===(r=n.planOptionLimitedInfo)||void 0===r?void 0:r.durationInMonths,"M"]}),Object(J.jsx)(S.a,{align:"center",children:null===n||void 0===n||null===(s=n.userLimitedInfo)||void 0===s?void 0:s.email.toLowerCase()}),Object(J.jsx)(S.a,{align:"center",children:null===n||void 0===n||null===(d=n.userLimitedInfo)||void 0===d?void 0:d.mobile}),Object(J.jsx)(S.a,{align:"center",children:null===n||void 0===n?void 0:n.startDate}),Object(J.jsx)(S.a,{align:"center",style:{whiteSpace:"nowrap"},children:null===n||void 0===n?void 0:n.endDate}),Object(J.jsx)(S.a,{align:"center",children:Object(J.jsx)(w.a,{className:e.status,style:{backgroundColor:"ACTIVE"===(null===n||void 0===n?void 0:n.status)?o.palette.success.main:o.palette.warning.dark},children:null===n||void 0===n?void 0:n.status})}),("ADMIN"===(null===t||void 0===t?void 0:t.role)||"SUPER_ADMIN"===(null===t||void 0===t?void 0:t.role))&&Object(J.jsx)(S.a,{align:"center",children:Object(J.jsx)(N.a,{title:"View Subscription",children:Object(J.jsx)(I.a,{onClick:function(){var e,t;(t=(null===n||void 0===n||null===(e=n.userLimitedInfo)||void 0===e?void 0:e.profileId)||"")&&he(t)},children:Object(J.jsx)(D.a,{color:"primary",fontSize:"small",style:{cursor:"pointer",fontSize:"1rem"}})})})})]},null===n||void 0===n?void 0:n.id)}))}):Object(J.jsx)("caption",{style:{textAlign:"center"},children:"Sorry! No data available"})]})}),Object(J.jsx)(P.a,{rowsPerPageOptions:[25,50,100],component:"div",count:(null===ue||void 0===ue?void 0:ue.totalElements)||0,rowsPerPage:K,page:V,onPageChange:function(e,t){X(t)},onRowsPerPageChange:function(e){var t=+e.target.value;Q(t),X(0)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),je&&Object(J.jsx)(W,{data:oe,open:je,close:function(){return be(!1)}})]})})}},949:function(e,t,n){}}]);
//# sourceMappingURL=56.37a49946.chunk.js.map