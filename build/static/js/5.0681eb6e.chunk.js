(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[5],{1e3:function(e,t,l){"use strict";l.r(t),l.d(t,"default",(function(){return M}));var i=l(16),a=l(28),n=l(7),s=l(3),o=l(0),c=l(29),d=l.n(c),r=l(737),j=l(139),u=l(54),b=l(20),m=l(475),v=l(346),O=l(119),h=l(223),x=l(472),f=l(724),p=l(473),N=l(725),g=l(726),S=l(103),I=l(43),C=l(85),A=l(34),E=l(38),y=l(21),w=l(291),T=l(358),P=l(46),D=l(199),q=l(9),k=l(226),U=(l(974),l(1012)),L=l(947),R=l(40),F=l(1),V=Object(j.a)((function(e){return{titleContainer:{background:e.palette.primary.main,padding:10,borderRadius:8,marginBottom:20},pageTitle:{fontSize:16,color:e.palette.background.paper,fontWeight:"lighter"},viewIcon:{verticalAlign:"sub",background:"tranparent",color:"#fff"},label:{width:"200px"},textfield:{width:"500px"},select:{width:"500px"},btnProfile:{width:"90px",height:"30px"},edit:{backgroundColor:"#ff8c00",width:"20px",height:"20px",borderRadius:"25px",marginTop:"30px",marginRight:"100px",fontSize:"10px",position:"absolute"},delete:{backgroundColor:"#ff8c00",width:"20px",height:"20px",borderRadius:"25px",marginTop:"40px",marginRight:"130px",fontSize:"10px"},span:{color:"red"},error:{color:"red"},nameEmail:Object(s.a)({display:"flex",justifyContent:"flex-end"},e.breakpoints.down("sm"),{display:"block"})}})),B=E.d({firstName:E.f().required("First name is required"),lastName:E.f().required("Last name is required"),email:E.f().email().required("Email is required"),mobile:E.f().matches(/^([0-9]{10})|([A-Za-z0-9._%\+\-]+@[a-z0-9.\-]+\.[a-z]{2,3})$/,"Enter Valid Mobile Number").required("Mobile Number Is required")});function M(e){e.active;var t,l=Object(y.b)(),s=V();Object(R.i)().id;Object(P.a)({roleList:["ADMIN","SCHOOL_ADMIN","TEACHER","STUDENT","SUPER_ADMIN"]});var c=Object(y.c)((function(e){return null===e||void 0===e?void 0:e.userProfile})),j=c.loggedUserProfile,E=c.loading,M=Object(y.c)((function(e){return null===e||void 0===e?void 0:e.addUser})).getUserProfileData,z=d.a.get("profileId"),_=Object(o.useState)(!1),H=Object(n.a)(_,2),J=H[0],W=H[1],G=Object(o.useState)(null),Z=Object(n.a)(G,2),$=Z[0],K=Z[1],Q=Object(o.useState)(),X=Object(n.a)(Q,2),Y=X[0],ee=X[1],te=Object(y.c)((function(e){return null===e||void 0===e?void 0:e.school})),le=te.getAllSchoolData,ie=te.getSchoolData,ae=te.schoolList,ne=(null===le||void 0===le||le.content,Object(o.useState)(!1)),se=Object(n.a)(ne,2),oe=se[0],ce=se[1],de=Object(o.useState)(null),re=Object(n.a)(de,2),je=re[0],ue=re[1];console.log("school-list-------",ae);var be={firstName:(null===j||void 0===j?void 0:j.firstName)||"",lastName:(null===j||void 0===j?void 0:j.lastName)||"",mobile:(null===j||void 0===j?void 0:j.mobile)||"",email:(null===j||void 0===j?void 0:j.email)||"",profileId:z||"",classAndSection:(null===j||void 0===j?void 0:j.classAndSection)||"",schoolId:(null===j||void 0===j?void 0:j.schoolId)||""},me=Object(I.f)({mode:"onChange",resolver:Object(C.a)(B),defaultValues:be}),ve=me.reset,Oe=me.handleSubmit,he=me.setValue,xe=(0,me.watch)("profileId");console.log("loggedUserProfile==",j.id),Object(o.useEffect)((function(){var e;j&&null!==(e=Object.keys(j))&&void 0!==e&&e.length&&(he("firstName",null===j||void 0===j?void 0:j.firstName),he("lastName",null===j||void 0===j?void 0:j.lastName),he("mobile",null===j||void 0===j?void 0:j.mobile),he("email",null===j||void 0===j?void 0:j.email),he("classAndSection",null===j||void 0===j?void 0:j.classAndSection),ee(null===j||void 0===j?void 0:j.profilePictureUrl))}),[j,he]);var fe=d.a.get("token");Object(o.useEffect)((function(){fe&&l(Object(S.b)())}),[fe,l]),Object(o.useEffect)((function(){xe&&l(Object(w.h)(xe,(function(){l(Object(S.b)()),l(Object(w.g)())})))}),[xe]);var pe=function(){var e=Object(a.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("profilePicture",$),e.next=4,Object(D.f)(t).then((function(e){l(Object(q.b)(null!==e&&void 0!==e&&e.message?null===e||void 0===e?void 0:e.message:"Profile Picture Uploaded Successfully !")),window.location.reload()})).catch((function(e){var t,i;console.log(e),l(Object(q.b)(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.message?null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message:"Please Select An Image!"))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(a.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("profilePicture",$),e.next=4,Object(D.e)(t).then((function(e){l(Object(q.b)("Profile Picture Removed Successfully")),window.location.reload()})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){l(Object(k.c)()),l(Object(k.f)()),l(Object(k.e)(null===j||void 0===j?void 0:j.schoolId))}),[]),Object(F.jsxs)(F.Fragment,{children:[E&&Object(F.jsx)(T.a,{isOpen:!0}),Object(F.jsx)(b.a,{item:!0,container:!0,xs:12,sm:12,md:12,className:s.card,children:Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(m.a,{className:s.infoCard,children:Object(F.jsxs)(u.a,{children:[Object(F.jsxs)("div",{className:s.titleContainer,children:[Object(F.jsx)(x.a,{className:s.viewIcon}),Object(F.jsx)("span",{className:s.pageTitle,children:"\xa0 Profile Details "})]}),Object(F.jsxs)(u.a,{children:[Object(F.jsxs)(b.a,{container:!0,paddingLeft:"15px",rowSpacing:2,children:[Object(F.jsxs)(b.a,{item:!0,xs:12,sm:12,children:[Object(F.jsx)("input",{name:"upload",type:"file",id:"upload",onChange:function(e){ee(URL.createObjectURL(e.target.files[0])),K(e.target.files[0])},style:{display:"none",alignSelf:"left"}}),Object(F.jsx)("label",{htmlFor:"upload",children:Object(F.jsxs)("div",{className:s.nameEmail,children:[Object(F.jsx)("div",{children:Object(F.jsx)(v.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(F.jsx)(r.a,{id:"avatar",src:Y,style:{width:"90px",height:"90px"}})})}),Object(F.jsx)("div",{children:Object(F.jsxs)(b.a,{item:!0,xs:12,alignSelf:"center",children:[Object(F.jsx)("h5",{style:{width:"150px",marginTop:"23px"},children:j?(null===j||void 0===j?void 0:j.firstName)+" "+(null===j||void 0===j?void 0:j.lastName):""}),Object(F.jsx)("p",{children:j?null===j||void 0===j?void 0:j.email:""})]})})]})})]}),Object(F.jsx)("br",{}),Object(F.jsxs)(b.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(O.a,{variant:"contained",className:"btnProfile",onClick:function(e){pe()},children:"upload new"}),"\xa0",Object(F.jsx)(O.a,{variant:"outlined",className:"btnProfile",onClick:function(e){Ne()},children:"Remove"})]}),Object(F.jsx)("div",{children:Object(F.jsx)(f.a,{color:"primary",fontSize:"small",onClick:function(){return W(!0)},style:{cursor:"pointer"}})})]})]}),Object(F.jsxs)(A.a,{methods:me,onSubmit:Oe((function(e){var t={firstName:null===e||void 0===e?void 0:e.firstName,lastName:null===e||void 0===e?void 0:e.lastName,mobile:null===e||void 0===e?void 0:e.mobile,email:null===e||void 0===e?void 0:e.email,classAndSection:null===e||void 0===e?void 0:e.classAndSection,schoolId:null===e||void 0===e?void 0:e.schoolId};l(Object(S.c)(t,(function(){l(Object(S.b)())}))),W(!1)})),children:[Object(F.jsxs)(b.a,{container:!0,xs:12,sm:12,spacing:2,style:{paddingLeft:"15px",marginTop:30},children:[Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsxs)("label",{className:s.label,children:["First Name",Object(F.jsx)("span",{className:s.span,children:"*"})]}),Object(F.jsx)(A.d,{name:"firstName",startAdornment:Object(F.jsx)(h.a,{position:"start",children:Object(F.jsx)(p.a,{})}),required:!0,disabled:!J})]}),Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsxs)("label",{className:s.label,children:["Last Name",Object(F.jsx)("span",{className:s.span,children:"*"})]}),Object(F.jsx)(A.d,{name:"lastName",startAdornment:Object(F.jsx)(h.a,{position:"start",children:Object(F.jsx)(p.a,{})}),required:!0,disabled:!J})]}),Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsxs)("label",{className:s.label,children:["Mobile ",Object(F.jsx)("span",{className:s.span,children:"*"})]}),Object(F.jsx)(A.d,{name:"mobile",startAdornment:Object(F.jsx)(h.a,{position:"start",children:Object(F.jsx)(N.a,{})}),required:!0,disabled:!J})]}),Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsxs)("label",{className:s.label,children:["Email",Object(F.jsx)("span",{className:s.span,children:"*"})]}),Object(F.jsx)(A.d,{name:"email",startAdornment:Object(F.jsx)(h.a,{position:"start",children:Object(F.jsx)(g.a,{})}),required:!0,disabled:!0})]}),"SCHOOL_ADMIN"===(null===j||void 0===j?void 0:j.role)&&Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsx)("label",{className:s.label,children:" School "}),Object(F.jsx)(A.d,{name:"school",value:null===ie||void 0===ie?void 0:ie.name,required:!0,disabled:!0})]}),"STUDENT"===(null===j||void 0===j?void 0:j.role)&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsx)("label",{className:s.label,children:" School "}),Object(F.jsx)(A.c,{name:"schoolId",label:"",disabled:!J,children:null===ae||void 0===ae?void 0:ae.map((function(e,t){return Object(F.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.nameBranch},t)}))})]}),Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,children:[Object(F.jsx)("label",{className:s.label,children:" Class/Section "}),Object(F.jsx)(A.d,{name:"classAndSection",required:!0,disabled:!J})]})]})]}),Object(F.jsx)(b.a,{container:!0,justifyContent:"center",alignItems:"center",style:{marginTop:40,marginBottom:40},children:Object(F.jsx)(O.a,{variant:"contained",type:"submit",color:"primary",children:"Save Changes"})}),"STUDENT"===(null===j||void 0===j?void 0:j.role)&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:s.titleContainer,children:[Object(F.jsx)(x.a,{className:s.viewIcon}),Object(F.jsx)("span",{className:s.pageTitle,children:"\xa0 Switch Profile "})]}),Object(F.jsxs)(b.a,{item:!0,container:!0,xs:12,sm:6,alignItems:"end",children:[Object(F.jsxs)(b.a,{item:!0,xs:6,children:[Object(F.jsx)("label",{className:s.label,children:"Current Profile"}),Object(F.jsx)(A.c,{name:"profileId",label:"",children:null===M||void 0===M||null===(t=M.userProfile)||void 0===t?void 0:t.map((function(e){return Object(F.jsxs)("option",{value:null===e||void 0===e?void 0:e.id,children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]},null===e||void 0===e?void 0:e.id)}))})]}),Object(F.jsxs)(b.a,{item:!0,xs:6,children:[Object(F.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){return ue(null),void ce(!0)},style:{boxShadow:"0 0.5em 0.5em 0.1em #68c2d9",marginLeft:"20px",display:"STUDENT"===(null===j||void 0===j?void 0:j.role)?"block":"none"},children:"Add Profile"}),oe&&Object(F.jsx)(L.a,{open:oe,onClose:function(){ve(),ce(!1)},isEditData:je,userId:j.id})]})]})]}),Object(F.jsx)("br",{}),Object(F.jsx)(U.default,{})]})]})]})})})})]})}},947:function(e,t,l){"use strict";l.d(t,"a",(function(){return w}));var i=l(0),a=l(40),n=l(21),s=l(64),o=l.n(s),c=l(43),d=l(38),r=l(85),j=l(34),u=l(933),b=l(740),m=l(898),v=l(158),O=l(741),h=l(899),x=l(20),f=l(343),p=l(900),N=l(119),g=l(103),S=l(226),I=l(291),C=(l(46),l(1)),A=d.d({firstName:d.f("Enter first name").required("First name is required"),lastName:d.f("Enter last name").required("Last name is required"),status:d.f("Status is required").required("Status is required"),dob:d.f("Enter Date Of Birth").required("Date Of Birth is required")}),E=[{id:0,status:"SELECT STATUS"},{id:1,status:"ACTIVE"},{id:2,status:"INACTIVE"}],y=[{id:0,status:"SELECT STATUS"},{id:1,status:"ACTIVE_PENDING"},{id:2,status:"ACTIVE_APPROVED"},{id:3,status:"ACTIVE_REJECTED"}];function w(e){var t=e.open,l=e.onClose,s=e.isEditData,d=e.userId;e.isUserRole;console.log(s);var w=Object(n.b)(),T=Object(u.a)(),P=Object(a.i)().role,D=Object(n.c)((function(e){return null===e||void 0===e?void 0:e.userProfile})).loggedUserProfile,q=Object(n.c)((function(e){return null===e||void 0===e?void 0:e.school})).schoolList,k={firstName:(null===s||void 0===s?void 0:s.firstName)||"",lastName:(null===s||void 0===s?void 0:s.lastName)||"",default:(null===s||void 0===s?void 0:s.default)||!1,schoolId:(null===s||void 0===s?void 0:s.schoolId)||"",classAndSection:(null===s||void 0===s?void 0:s.classAndSection)||"",status:null===s||void 0===s?void 0:s.status,dob:null===s||void 0===s?void 0:s.dob,comments:null===s||void 0===s?void 0:s.adminComment},U=Object(c.f)({mode:"onChange",resolver:Object(r.a)(A),defaultValues:k}),L=U.reset,R=U.handleSubmit,F=(0,U.watch)("schoolId");Object(i.useEffect)((function(){s||L(k)}),[s]);return Object(i.useEffect)((function(){w(Object(S.f)())}),[]),Object(C.jsx)("div",{children:Object(C.jsxs)(b.a,{open:t,onClose:l,maxWidth:"xs",classes:{paper:T.dialog},children:[Object(C.jsx)(m.a,{className:T.dialogTitle,children:Object(C.jsxs)("div",{className:T.dialogTitleChild,children:[Object(C.jsxs)(v.a,{style:{fontSize:"20px"},children:[s?"Update":"Add"," Profile"]}),Object(C.jsx)(O.a,{to:"#",onClick:l,children:Object(C.jsx)(o.a,{className:T.closeIcon})})]})}),Object(C.jsxs)(j.a,{methods:U,onSubmit:R((function(e){null===e||void 0===e||e.firstName,null===e||void 0===e||e.lastName,null===e||void 0===e||e.default,null===e||void 0===e||e.schoolId,null===e||void 0===e||e.status;var t={};t=""===(null===e||void 0===e?void 0:e.schoolId)?{firstName:null===e||void 0===e?void 0:e.firstName,lastName:null===e||void 0===e?void 0:e.lastName,default:null===e||void 0===e?void 0:e.default,status:null===e||void 0===e?void 0:e.status,dob:null===e||void 0===e?void 0:e.dob,adminComment:null===e||void 0===e?void 0:e.comments}:{firstName:null===e||void 0===e?void 0:e.firstName,lastName:null===e||void 0===e?void 0:e.lastName,default:null===e||void 0===e?void 0:e.default,schoolId:null===e||void 0===e?void 0:e.schoolId,classAndSection:null===e||void 0===e?void 0:e.classAndSection,status:null===e||void 0===e?void 0:e.status,dob:null===e||void 0===e?void 0:e.dob,adminComment:null===e||void 0===e?void 0:e.comments},w(s?Object(I.i)(t,null===s||void 0===s?void 0:s.userId,null===s||void 0===s?void 0:s.id,(function(){w(Object(g.e)(null===s||void 0===s?void 0:s.userId)),L(k),l()})):Object(g.a)(t,d,(function(){w(Object(g.e)(d)),L(),l()})))})),children:[Object(C.jsx)(h.a,{children:Object(C.jsxs)(x.a,{container:!0,spacing:2,children:[Object(C.jsxs)(x.a,{item:!0,xs:12,sm:12,children:[Object(C.jsxs)("label",{className:T.label,children:["First Name ",Object(C.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(C.jsx)(j.d,{name:"firstName",placeholder:"First name",className:T.loginInput,autoFocus:!0})]}),Object(C.jsxs)(x.a,{item:!0,xs:12,sm:12,children:[Object(C.jsxs)("label",{className:T.label,children:["Last Name ",Object(C.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(C.jsx)(j.d,{name:"lastName",placeholder:"Last name",className:T.loginInput})]}),Object(C.jsxs)(x.a,{item:!0,xs:12,sm:12,children:[Object(C.jsxs)("label",{className:T.label,children:["Date Of Birth ",Object(C.jsx)("span",{className:T.mandatory,children:"*"})]}),Object(C.jsx)(j.d,{type:"date",name:"dob",placeholder:"Date Of Birth",className:T.loginInput})]}),"student"==P&&Object(C.jsxs)(x.a,{item:!0,xs:12,sm:12,children:[Object(C.jsx)("label",{className:T.label,children:" School Name "}),Object(C.jsxs)(j.c,{name:"schoolId",label:"",children:[Object(C.jsx)("option",{value:"",children:" Select School "}),null===q||void 0===q?void 0:q.map((function(e,t){return Object(C.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.nameBranch},t)}))]})]}),"school-admin"==P&&Object(C.jsxs)(x.a,{item:!0,xs:12,sm:12,children:[Object(C.jsx)("label",{className:T.label,children:" School Name "}),Object(C.jsxs)(j.c,{name:"schoolId",label:"",children:[Object(C.jsx)("option",{value:"",children:" Select School "}),null===q||void 0===q?void 0:q.map((function(e,t){return Object(C.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.nameBranch},t)}))]})]}),""!==F&&"Select a School"!==F&&"student"==P&&Object(C.jsx)(x.a,{item:!0,xs:12,children:Object(C.jsx)(j.d,{name:"classAndSection",placeholder:"Enter your class/section"})}),Object(C.jsxs)(x.a,{item:!0,xs:12,children:[Object(C.jsxs)("label",{children:["Status ",Object(C.jsx)("span",{className:T.mandatory,children:"*"})]}),""==F&&Object(C.jsx)(j.c,{name:"status",label:"",children:null===E||void 0===E?void 0:E.map((function(e,t){return Object(C.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))}),""!==F&&"school-admin"==P&&Object(C.jsx)(j.c,{name:"status",label:"",children:null===E||void 0===E?void 0:E.map((function(e,t){return Object(C.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))}),""!==F&&"student"==P&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(j.c,{name:"status",label:"",children:null===y||void 0===y?void 0:y.map((function(e,t){return Object(C.jsx)("option",{value:null===e||void 0===e?void 0:e.status,children:null===e||void 0===e?void 0:e.status},t)}))})})]}),("ADMIN"===(null===D||void 0===D?void 0:D.role)||"SUPER_ADMIN"===(null===D||void 0===D?void 0:D.role))&&Object(C.jsxs)(x.a,{item:!0,xs:12,children:[Object(C.jsx)("label",{children:"Comments"}),Object(C.jsx)(j.d,{name:"comments",multiline:!0,rows:4})]}),Object(C.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(C.jsx)(j.b,{name:"default",label:"Default"})})]})}),Object(C.jsx)(f.a,{style:{marginTop:15}}),Object(C.jsxs)(p.a,{className:T.dialogAction,children:[Object(C.jsx)(N.a,{variant:"outlined",color:"primary",className:T.buttonCancel,onClick:l,children:"Close"}),Object(C.jsx)(N.a,{variant:"contained",color:"primary",type:"submit",className:T.buttonSubmit,children:s?"Update":"Add"})]})]})]})})}}}]);
//# sourceMappingURL=5.0681eb6e.chunk.js.map