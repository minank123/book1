(this["webpackJsonpbookeinstein-app"]=this["webpackJsonpbookeinstein-app"]||[]).push([[55],{1091:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return q}));n(16),n(4),n(28);var c=n(7),o=n(0),a=n(21),i=n(40),l=n(750),s=n(342),r=n(745),u=n(222),d=n(65),b=n(223),j=n(746),v=n(747),h=n(748),O=n(113),f=n(749),p=n(738),g=n(26),m=n(97),y=n.n(m),x=n(62),k=n(54),S=n(950),N=n(988),D=n(46),C=n(173),I=n(1),P=Object(l.a)((function(t){return{root:{"&:nth-of-type(even)":{backgroundColor:t.palette.action.hover}}}}))(r.a);function q(){var t=Object(x.a)();Object(D.a)({roleList:["ADMIN","SCHOOL_ADMIN","SUPER_ADMIN"]});var e=Object(a.c)((function(t){return null===t||void 0===t?void 0:t.userProfile})).loggedUserProfile,n=(Object(i.g)(),Object(i.i)().id),l=Object(a.b)(),r=(Object(s.a)(),Object(o.useState)("")),m=Object(c.a)(r,2),q=m[0],T=m[1],A=Object(o.useState)(0),w=Object(c.a)(A,2),E=w[0],M=w[1],U=Object(o.useState)(25),L=Object(c.a)(U,2),R=L[0],z=L[1],B=Object(o.useState)(!1),F=Object(c.a)(B,2),_=F[0],H=F[1],Q=Object(o.useState)(null),G=Object(c.a)(Q,2),J=G[0],K=G[1],V=Object(o.useState)(null),Y=Object(c.a)(V,2),W=Y[0],X=Y[1],Z=Object(a.c)((function(t){return null===t||void 0===t?void 0:t.stock})).viewStockData,$=null===Z||void 0===Z?void 0:Z.content,tt=null===Z||void 0===Z?void 0:Z.totalElements;console.log("==================>",tt);var et=Object(o.useState)({isOpen:!1,title:"",subTitle:""}),nt=Object(c.a)(et,2),ct=nt[0],ot=nt[1];return Object(o.useEffect)((function(){n&&(l(Object(S.f)(n,q||"",E+1,R)),X(n))}),[n,q,E,R]),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(k.a,{children:[Object(I.jsxs)("div",{className:t.titleContainer,children:[Object(I.jsx)(y.a,{className:t.viewIcon}),("ADMIN"===(null===e||void 0===e?void 0:e.role)||"SUPER_ADMIN"===(null===e||void 0===e?void 0:e.role))&&Object(I.jsx)("span",{className:t.pageTitle,children:"\xa0 School Stock "}),"SCHOOL_ADMIN"===(null===e||void 0===e?void 0:e.role)&&Object(I.jsx)("span",{className:t.pageTitle,children:"\xa0 Stock Your School "})]}),Object(I.jsxs)(u.a,{elevation:5,className:t.root,children:[Object(I.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(I.jsx)(d.a,{className:t.searchControl,id:"input-search-header",value:q,onChange:function(t){return T(t.target.value)},placeholder:"Search",startAdornment:Object(I.jsx)(b.a,{position:"start",children:Object(I.jsx)(g.U,{stroke:1.5,size:"1rem",className:t.startAdornment})})})}),Object(I.jsx)(j.a,{className:t.tableContainer,children:Object(I.jsxs)(v.a,{className:t.table,"aria-label":"simple table",children:[Object(I.jsx)(h.a,{className:t.tableHeaderCell,children:Object(I.jsxs)(P,{children:[Object(I.jsx)(O.a,{children:" Cover "}),Object(I.jsx)(O.a,{children:" Book Name "}),Object(I.jsx)(O.a,{children:" Author "}),Object(I.jsx)(O.a,{children:" Publisher "}),Object(I.jsx)(O.a,{children:" Isbn No. "}),Object(I.jsx)(O.a,{children:" Total Quantity "})]})}),$?Object(I.jsx)(f.a,{children:null===$||void 0===$?void 0:$.map((function(t,e){var n,c,o,a,i,l;return Object(I.jsxs)(P,{children:[Object(I.jsx)(O.a,{children:Object(I.jsx)("img",{src:null===t||void 0===t||null===(n=t.bookDetail)||void 0===n||null===(c=n.imageUrls)||void 0===c?void 0:c[0],alt:"",width:100,height:100,style:{objectFit:"contain"}})}),Object(I.jsxs)(O.a,{children:[" ",null===t||void 0===t||null===(o=t.bookDetail)||void 0===o?void 0:o.title," "]}),Object(I.jsxs)(O.a,{children:[" ",null===t||void 0===t||null===(a=t.bookDetail)||void 0===a?void 0:a.author," "]}),Object(I.jsxs)(O.a,{children:[" ",null===t||void 0===t||null===(i=t.bookDetail)||void 0===i?void 0:i.publisher," "]}),Object(I.jsxs)(O.a,{children:[" ",null===t||void 0===t||null===(l=t.bookDetail)||void 0===l?void 0:l.isbn," "]}),Object(I.jsxs)(O.a,{align:"center",children:[" ",t.totalQuantity||"0"]})]},t.id)}))}):Object(I.jsx)("caption",{style:{textAlign:"center"},children:"Sorry! No data available"})]})}),Object(I.jsx)(p.a,{rowsPerPageOptions:[25,50,100],component:"div",count:tt||0,rowsPerPage:R,page:E,onPageChange:function(t,e){M(e),console.log("page count ------\x3e ",e)},onRowsPerPageChange:function(t){z(+t.target.value),M(0)},sx:{".MuiTablePagination-displayedRows":{marginBottom:0},".MuiTablePagination-selectLabel":{marginBottom:0}}})]}),_&&Object(I.jsx)(N.a,{open:_,close:function(){K(null),H(!1)},isEditData:J,isSchoolId:W}),ct&&Object(I.jsx)(C.a,{confirmDialog:ct,setConfirmDialog:ot})]})})}},950:function(t,e,n){"use strict";n.d(e,"f",(function(){return d})),n.d(e,"b",(function(){return b})),n.d(e,"e",(function(){return j})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return O}));var c=n(11),o=n(5),a=n(9),i=function(t){return{type:o.ag,error:t}},l=function(t){return{type:o.Rf,error:t}},s=function(t){return{type:o.g,error:t}},r=function(t){return{type:o.he,error:t}},u=function(t){return{type:o.Lf,error:t}},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25;return function(s){s({type:o.bg});try{Object(c.a)("http://localhost:8102","GET","books-service/books/schools/".concat(t,"/total?searchKey=").concat(e,"&pageNumber=").concat(n,"&pageSize=").concat(l),!0).then((function(t){s(function(t){return{type:o.cg,payload:t}}({viewStockData:t}))})).catch((function(t){s(i(t)),s(Object(a.b)(null===t||void 0===t?void 0:t.message))}))}catch(r){s(i(null===r||void 0===r?void 0:r.message))}}},b=function(t,e,n){return function(o){try{Object(c.a)("http://localhost:8102","DELETE","books-service/books/".concat(t,"/schools/").concat(e,"/total"),!0).then((function(t){o(Object(a.b)(null!==t&&void 0!==t&&t.message?null===t||void 0===t?void 0:t.message:"Deleted Successfully")),n&&n(t)})).catch((function(t){var e;console.log(t),o(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(i){console.log(i),o(Object(a.b)("Deleted Module Successfully"))}}},j=function(t,e,n,i){return function(s){s({type:o.Sf});try{Object(c.a)("http://localhost:8102","PUT","books-service/books/".concat(e,"/schools/").concat(n,"/total?quantity=").concat(t),!0).then((function(t){s(function(t){return{type:o.Tf,payload:t}}(t)),i&&i(t),s(Object(a.b)(null===t||void 0===t?void 0:t.message))})).catch((function(t){var e;console.log(t),s(l(t)),s(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(r){s(l(null===r||void 0===r?void 0:r.message))}}},v=function(t,e,n,i){return function(l){l({type:o.h});try{Object(c.a)("http://localhost:8102","POST","books-service/books/".concat(e,"/schools/").concat(n,"/total?quantity=").concat(t),!0).then((function(t){l(function(t){return{type:o.i,payload:t}}(t)),i&&i(t)})).catch((function(t){var e;l(s(t)),l(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(r){l(s(null===r||void 0===r?void 0:r.message))}}},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return function(i){i({type:o.ie});try{Object(c.a)("http://localhost:8102","GET","books-service/books/total?searchKey=".concat(t,"&pageNumber=").concat(e,"&pageSize=").concat(n),!0).then((function(t){i(function(t){return{type:o.je,payload:t}}({libraryStockData:t}))})).catch((function(t){i(r(t)),i(Object(a.b)(null===t||void 0===t?void 0:t.message))}))}catch(l){i(r(null===l||void 0===l?void 0:l.message))}}},O=function(t,e,n){return function(i){i({type:o.Mf});try{var l=e>=0;Object(c.a)("http://localhost:8102","PUT","books-service/books/".concat(t,"/total/library-stock?quantity=").concat(e," "),!0).then((function(t){var e;i((e=t,{type:o.Nf,payload:e})),i(Object(a.b)("".concat(l?"Incremented":"Decremented"," successfully"))),n&&n(t)})).catch((function(t){var e;i(u(t)),i(Object(a.b)(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message))}))}catch(s){i(u(null===s||void 0===s?void 0:s.message))}}}},988:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));n(0);var c=n(43),o=n(85),a=n(34),i=n(38),l=n(64),s=n.n(l),r=n(740),u=n(898),d=n(158),b=n(741),j=n(899),v=n(20),h=n(343),O=n(900),f=n(119),p=n(21),g=n(140),m=n(950),y=n(40),x=n(1),k=i.d({quantity:i.f("Enter stock quantity").required("Stock quantity is required")});function S(t){var e=t.open,n=t.close,i=t.isEditData,l=t.isSchoolId,S=t.isBooksId,N=Object(g.a)(),D=Object(y.g)(),C=Object(p.b)(),I={quantity:(null===i||void 0===i?void 0:i.totalQuantity)||""},P=Object(c.f)({mode:"onChange",resolver:Object(o.a)(k),defaultValues:I}),q=P.handleSubmit;return Object(x.jsx)("div",{children:Object(x.jsxs)(r.a,{open:e,classes:{paper:N.dialog},children:[Object(x.jsx)(u.a,{className:N.dialogTitle,children:Object(x.jsxs)("div",{className:N.dialogTitleChild,children:[Object(x.jsx)(d.a,{style:{fontSize:"20px"},children:i?"Update stock quantity":"Add stock quantity"}),Object(x.jsx)(b.a,{to:"#",onClick:n,children:Object(x.jsx)(s.a,{className:N.closeIcon})})]})}),Object(x.jsxs)(a.a,{methods:P,onSubmit:q((function(t){C(i?Object(m.e)(parseInt(null===t||void 0===t?void 0:t.quantity),null===i||void 0===i?void 0:i.bookId,l,(function(){n(),C(Object(m.f)(l))})):Object(m.a)(parseInt(null===t||void 0===t?void 0:t.quantity),S,l,(function(){n(),D.push("/admin/view-stock/".concat(l))})))})),children:[Object(x.jsx)(j.a,{children:Object(x.jsx)(v.a,{container:!0,spacing:2,children:Object(x.jsxs)(v.a,{item:!0,xs:12,sm:12,children:[Object(x.jsxs)("label",{className:N.label,children:["Increment or decrement stock quantity",Object(x.jsx)("span",{className:N.mandatory,children:"*"})]}),Object(x.jsx)(a.d,{name:"quantity",placeholder:"Add stock quantity",className:N.textField,autoFocus:!0})]})})}),Object(x.jsx)(h.a,{style:{marginTop:15}}),Object(x.jsxs)(O.a,{className:N.dialogAction,children:[Object(x.jsx)(f.a,{variant:"outlined",color:"primary",className:N.buttonCancel,onClick:n,children:"Close"}),Object(x.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",className:N.buttonSubmit,children:i?"Update":"Add"})]})]})]})})}}}]);
//# sourceMappingURL=55.68ff8d03.chunk.js.map