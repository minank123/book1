{"version":3,"sources":["views/stock-management/UpdateLibraryStock.js","views/stock-management/LibraryStock.js","store/actions/StockActions/index.js"],"names":["validationSchema","yup","quantity","required","UpdateLibraryStock","props","open","close","isEditData","classes","useStyles","dispatch","useDispatch","initialValues","totalQuantity","methods","useForm","mode","resolver","yupResolver","defaultValues","handleSubmit","_jsx","children","_jsxs","Dialog","paper","dialog","DialogTitle","className","dialogTitle","dialogTitleChild","Typography","style","fontSize","Link","to","onClick","CloseIcon","closeIcon","FormProvider","onSubmit","data","updateLibraryStock","bookId","getLibraryStock","DialogContent","Grid","container","spacing","item","xs","sm","label","mandatory","RHFTextField","name","placeholder","textField","Divider","marginTop","DialogActions","dialogAction","Button","variant","color","buttonCancel","type","buttonSubmit","StyledTableRow","withStyles","theme","root","backgroundColor","palette","action","hover","TableRow","LibraryStock","useUserRole","roleList","useTheme","_useState","useState","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","rowsPerPage","setRowsPerPage","_useState5","_useState6","setEditData","_useState7","_useState8","isOpen","setOpen","_useState9","_useState10","isSearch","setSearch","libraryStockData","useSelector","state","stock","newData","content","totalCount","totalElements","useEffect","_Fragment","MainCard","titleContainer","SchoolIcon","viewIcon","pageTitle","Paper","elevation","display","justifyContent","OutlinedInput","searchControl","id","onChange","event","target","value","handleSearch","startAdornment","InputAdornment","position","IconSearch","stroke","size","TableContainer","tableContainer","Table","table","TableHead","tableHeaderCell","TableCell","align","TableBody","map","row","_row$bookDetail","_row$bookDetail$image","_row$bookDetail2","_row$bookDetail3","_row$bookDetail4","_row$bookDetail5","_row$bookDetail6","_row$bookDetail7","src","bookDetail","imageUrls","alt","width","height","objectFit","title","author","isbn","availableQuantity","status","success","main","warning","dark","Tooltip","IconButton","EditIcon","cursor","textAlign","TablePagination","rowsPerPageOptions","component","count","onPageChange","newPage","onRowsPerPageChange","sx","marginBottom","viewStockError","error","VIEW_STOCK_ERROR","updateStockError","UPDATE_STOCK_ERROR","addStockError","ADD_STOCK_ERROR","getLibraryStockError","GET_LIBRARY_STOCK_ERROR","updateLibraryStockError","UPDATE_LIBRARY_STOCK_ERROR","viewStock","schoolId","searchData","arguments","length","undefined","rowsPerpage","VIEW_STOCK_START","http","process","concat","then","res","payload","VIEW_STOCK_SUCCESS","viewStockSuccess","viewStockData","catch","err","setMessage","message","deleteBookFromStok","bid","profileId","successCB","_err$data","console","log","updateStock","successCb","UPDATE_STOCK_START","UPDATE_STOCK_SUCCESS","updateStockSuccess","_err$data2","addStock","ADD_STOCK_START","ADD_STOCK_SUCCESS","addStockSuccess","_err$data3","GET_LIBRARY_STOCK_START","GET_LIBRARY_STOCK_SUCCESS","getLibraryStockSuccess","UPDATE_LIBRARY_STOCK_START","isIncrement","UPDATE_LIBRARY_STOCK_SUCCESS","_err$data4"],"mappings":"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","file":"static/js/69.77c9f6e8.chunk.js","sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { FormProvider, RHFTextField } from '../../components/hook-form';\nimport * as yup from 'yup';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography, Grid, Link, Divider } from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\nimport useStyles from '../DialogStyles';\nimport { getLibraryStock, updateLibraryStock } from '../../store/actions/StockActions';\n\nconst validationSchema = yup.object({\n    quantity: yup.string('Enter stock quantity').required('Stock quantity is required')\n});\n\nexport default function UpdateLibraryStock(props) {\n    const { open, close, isEditData } = props;\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    const initialValues = {\n        quantity: isEditData?.totalQuantity || ''\n    };\n    const methods = useForm({\n        mode: 'onChange',\n        resolver: yupResolver(validationSchema),\n        defaultValues: initialValues\n    });\n    const { handleSubmit } = methods;\n    const onSubmit = (data) => {\n        dispatch(\n            updateLibraryStock(isEditData?.bookId, data?.quantity, () => {\n                dispatch(getLibraryStock());\n                close();\n            })\n        );\n    };\n\n    return (\n        <div>\n            <Dialog open={open} classes={{ paper: classes.dialog }}>\n                <DialogTitle className={classes.dialogTitle}>\n                    <div className={classes.dialogTitleChild}>\n                        <Typography style={{ fontSize: '20px' }}> Update library stock quantity</Typography>\n                        <Link to=\"#\" onClick={close}>\n                            <CloseIcon className={classes.closeIcon} />\n                        </Link>\n                    </div>\n                </DialogTitle>\n                <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\n                    <DialogContent>\n                        <Grid container spacing={2}>\n                            <Grid item xs={12} sm={12}>\n                                <label className={classes.label}>\n                                    Increment or decrement library stock quantity<span className={classes.mandatory}>*</span>\n                                </label>\n                                <RHFTextField name=\"quantity\" placeholder=\"Add stock quantity\" className={classes.textField} />\n                            </Grid>\n                        </Grid>\n                    </DialogContent>\n                    <Divider style={{ marginTop: 15 }} />\n                    <DialogActions className={classes.dialogAction}>\n                        <Button variant=\"outlined\" color=\"primary\" className={classes.buttonCancel} onClick={close}>\n                            Close\n                        </Button>\n                        <Button variant=\"contained\" color=\"primary\" type=\"submit\" className={classes.buttonSubmit}>\n                            {!isEditData ? 'Add' : 'Update'}\n                        </Button>\n                    </DialogActions>\n                </FormProvider>\n            </Dialog>\n        </div>\n    );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withStyles, useTheme } from '@material-ui/styles';\nimport {\n    IconButton,\n    Typography,\n    Button,\n    Table,\n    TableBody,\n    TableCell,\n    TableContainer,\n    TableHead,\n    TableRow,\n    Paper,\n    TablePagination,\n    OutlinedInput,\n    InputAdornment,\n    Tooltip\n} from '@material-ui/core';\nimport { IconSearch } from '@tabler/icons';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SchoolIcon from '@material-ui/icons/School';\nimport useStyles from '../ViewTableStyles';\nimport MainCard from '../../ui-component/cards/MainCard';\nimport { getLibraryStock } from '../../store/actions/StockActions';\nimport UpdateLibraryStock from './UpdateLibraryStock';\nimport useUserRole from '../../hooks/useUserRole';\n\nconst StyledTableRow = withStyles((theme) => ({\n    root: {\n        '&:nth-of-type(even)': {\n            backgroundColor: theme.palette.action.hover\n        }\n    }\n}))(TableRow);\n\nexport default function LibraryStock() {\n    const classes = useStyles();\n    useUserRole({ roleList: ['ADMIN', 'SUPER_ADMIN'] });\n    const dispatch = useDispatch();\n    const theme = useTheme();\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(25);\n    const [isEditData, setEditData] = useState(null);\n    const [isOpen, setOpen] = useState(false);\n\n    const [isSearch, setSearch] = useState('');\n    const { libraryStockData } = useSelector((state) => state?.stock);\n\n    const newData = libraryStockData?.content;\n    const totalCount = libraryStockData?.totalElements;\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n    };\n\n    const handleChangeRowsPerPage = (event) => {\n        setRowsPerPage(+event.target.value);\n    };\n\n    const handleUpdateStock = (data) => {\n        setEditData(data);\n        setOpen(true);\n    };\n    const handleCLoseModal = () => {\n        setEditData(null);\n        setOpen(false);\n    };\n\n    const handleSearch = (event) => {\n        setSearch(event.target.value);\n    };\n\n    useEffect(() => {\n        dispatch(getLibraryStock(isSearch ? isSearch : '', page + 1, rowsPerPage));\n    }, [isSearch, page, rowsPerPage]);\n\n    return (\n        <>\n            <MainCard>\n                <div className={classes.titleContainer}>\n                    <SchoolIcon className={classes.viewIcon} />\n                    <span className={classes.pageTitle}> &nbsp; Library Stock </span>\n                </div>\n                <Paper elevation={5} className={classes.root}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                        <OutlinedInput\n                            className={classes.searchControl}\n                            id=\"input-search-header\"\n                            placeholder=\"Search\"\n                            onChange={(event) => handleSearch(event)}\n                            startAdornment={\n                                <InputAdornment position=\"start\">\n                                    <IconSearch stroke={1.5} size=\"1rem\" className={classes.startAdornment} />\n                                </InputAdornment>\n                            }\n                        />\n                    </div>\n                    <TableContainer className={classes.tableContainer}>\n                        <Table className={classes.table} aria-label=\"simple table\">\n                            <TableHead className={classes.tableHeaderCell}>\n                                <StyledTableRow>\n                                    <TableCell> Cover </TableCell>\n                                    <TableCell> Name </TableCell>\n                                    <TableCell> Author </TableCell>\n                                    <TableCell> Isbn </TableCell>\n                                    <TableCell> Total quantity </TableCell>\n                                    <TableCell> Available quantity </TableCell>\n                                    <TableCell align=\"center\"> Status </TableCell>\n                                    <TableCell align=\"right\"> Action </TableCell>\n                                </StyledTableRow>\n                            </TableHead>\n\n                            {!newData ? (\n                                <caption style={{ textAlign: 'center' }}> Sorry! No data available </caption>\n                            ) : (\n                                <TableBody>\n                                    {newData?.map((row) => (\n                                        <StyledTableRow key={row.id}>\n                                            <TableCell>\n                                                <img\n                                                    src={row?.bookDetail?.imageUrls?.[0]}\n                                                    alt=\"\"\n                                                    width=\"60px\" height={100}\n                                                    style={{ objectFit: 'contain' }}\n                                                />\n                                            </TableCell>\n                                            <TableCell> {row?.bookDetail?.title || '-'} </TableCell>\n                                            <TableCell> {row?.bookDetail?.author || '-'} </TableCell>\n                                            <TableCell> {row?.bookDetail?.isbn || '-'} </TableCell>\n                                            <TableCell align=\"center\"> {row.totalQuantity} </TableCell>\n                                            <TableCell align=\"center\"> {row.availableQuantity}</TableCell>\n                                            <TableCell align=\"center\">\n                                                <Typography\n                                                    className={classes.status}\n                                                    style={{\n                                                        backgroundColor:\n                                                            (row?.bookDetail?.status === 'ACTIVE' && theme.palette.success.main) ||\n                                                            (row?.bookDetail?.status === 'INACTIVE' && theme.palette.warning.dark)\n                                                    }}\n                                                >\n                                                    {row?.bookDetail?.status}\n                                                </Typography>\n                                            </TableCell>\n                                            <TableCell align=\"right\">\n                                                <Tooltip title=\"Edit Stock\">\n                                                    <IconButton onClick={() => handleUpdateStock(row)}>\n                                                        <EditIcon color=\"primary\" fontSize=\"small\" style={{ cursor: 'pointer' }} />\n                                                    </IconButton>\n                                                </Tooltip>\n                                            </TableCell>\n                                        </StyledTableRow>\n                                    ))}\n                                </TableBody>\n                            )}\n                        </Table>\n                    </TableContainer>\n                    <TablePagination\n                        rowsPerPageOptions={[25, 50, 100]}\n                        component=\"div\"\n                        count={totalCount || 0}\n                        rowsPerPage={rowsPerPage}\n                        page={page}\n                        onPageChange={handleChangePage}\n                        onRowsPerPageChange={handleChangeRowsPerPage}\n                        sx={{\n                            '.MuiTablePagination-displayedRows': {\n                                marginBottom: 0\n                            },\n                            '.MuiTablePagination-selectLabel': {\n                                marginBottom: 0\n                            }\n                        }}\n                    />\n                </Paper>\n                {isOpen && <UpdateLibraryStock isEditData={isEditData} open={isOpen} close={handleCLoseModal} />}\n            </MainCard>\n        </>\n    );\n}\n","import { http } from '../../../utils/http';\nimport {\n    VIEW_STOCK_START,\n    VIEW_STOCK_SUCCESS,\n    VIEW_STOCK_ERROR,\n    UPDATE_STOCK_ERROR,\n    UPDATE_STOCK_START,\n    UPDATE_STOCK_SUCCESS,\n    ADD_STOCK_START,\n    ADD_STOCK_SUCCESS,\n    ADD_STOCK_ERROR,\n    GET_LIBRARY_STOCK_START,\n    GET_LIBRARY_STOCK_SUCCESS,\n    GET_LIBRARY_STOCK_ERROR,\n    UPDATE_LIBRARY_STOCK_START,\n    UPDATE_LIBRARY_STOCK_SUCCESS,\n    UPDATE_LIBRARY_STOCK_ERROR\n} from '../../constants';\nimport { setMessage } from '../MessageActions';\n\nconst viewStockStart = () => {\n    return { type: VIEW_STOCK_START };\n};\nconst viewStockSuccess = (payload) => {\n    return { type: VIEW_STOCK_SUCCESS, payload };\n};\nconst viewStockError = (error) => {\n    return { type: VIEW_STOCK_ERROR, error };\n};\nconst updateStockStart = () => {\n    return { type: UPDATE_STOCK_START };\n};\nconst updateStockSuccess = (payload) => {\n    return { type: UPDATE_STOCK_SUCCESS, payload };\n};\nconst updateStockError = (error) => {\n    return { type: UPDATE_STOCK_ERROR, error };\n};\nconst addStockStart = () => {\n    return { type: ADD_STOCK_START };\n};\nconst addStockSuccess = (payload) => {\n    return { type: ADD_STOCK_SUCCESS, payload };\n};\nconst addStockError = (error) => {\n    return { type: ADD_STOCK_ERROR, error };\n};\nconst getLibraryStockStart = () => {\n    return { type: GET_LIBRARY_STOCK_START };\n};\nconst getLibraryStockSuccess = (payload) => {\n    return { type: GET_LIBRARY_STOCK_SUCCESS, payload };\n};\nconst getLibraryStockError = (error) => {\n    return { type: GET_LIBRARY_STOCK_ERROR, error };\n};\nconst updateLibraryStockStart = () => {\n    return { type: UPDATE_LIBRARY_STOCK_START };\n};\nconst updateLibraryStockSuccess = (payload) => {\n    return { type: UPDATE_LIBRARY_STOCK_SUCCESS, payload };\n};\nconst updateLibraryStockError = (error) => {\n    return { type: UPDATE_LIBRARY_STOCK_ERROR, error };\n};\n\nconst viewStock =\n    (schoolId, searchData = '', page=1 ,rowsPerpage=25) =>\n    (dispatch) => {\n        dispatch(viewStockStart());\n        try {\n            http(\n                process.env.REACT_APP_ROOT_URL_BOOK,\n                'GET',\n                `books-service/books/schools/${schoolId}/total?searchKey=${searchData}&pageNumber=${page}&pageSize=${rowsPerpage}`,\n                true\n            )\n                .then((res) => {\n                    const payload = {\n                        viewStockData: res\n                    };\n                    dispatch(viewStockSuccess(payload));\n                })\n                .catch((err) => {\n                    dispatch(viewStockError(err));\n                    dispatch(setMessage(err?.message));\n                });\n        } catch (error) {\n            dispatch(viewStockError(error?.message));\n        }\n    };\n    const deleteBookFromStok = (bid,profileId, successCB) => (dispatch) => {\n        try {\n            http(process.env.REACT_APP_ROOT_URL_BOOK, 'DELETE', `books-service/books/${bid}/schools/${profileId}/total`, true)\n                .then((res) => {\n                    dispatch(setMessage(res?.message ? res?.message : 'Deleted Successfully'));\n                    successCB && successCB(res);\n                })\n                .catch((err) => {\n                    console.log(err);\n                    dispatch(setMessage(err?.data?.message));\n                });\n        } catch (error) {\n            console.log(error);\n            dispatch(setMessage('Deleted Module Successfully'));\n        }\n    };\n\nconst updateStock = (payload, bookId, schoolId, successCb) => (dispatch) => {\n    dispatch(updateStockStart());\n    try {\n        http(\n            process.env.REACT_APP_ROOT_URL_BOOK,\n            'PUT',\n            `books-service/books/${bookId}/schools/${schoolId}/total?quantity=${payload}`,\n            true\n        )\n            .then((res) => {\n                dispatch(updateStockSuccess(res));\n                successCb && successCb(res);\n                dispatch(setMessage(res?.message));\n            })\n            .catch((err) => {\n                console.log(err)\n                dispatch(updateStockError(err));\n                dispatch(setMessage(err?.data?.message));\n            });\n    } catch (error) {\n        dispatch(updateStockError(error?.message));\n    }\n};\n\nconst addStock = (payload, bookId, schoolId, successCb) => (dispatch) => {\n    dispatch(addStockStart());\n    try {\n        http(\n            process.env.REACT_APP_ROOT_URL_BOOK,\n            'POST',\n            `books-service/books/${bookId}/schools/${schoolId}/total?quantity=${payload}`,\n            true\n        )\n            .then((res) => {\n                dispatch(addStockSuccess(res));\n                successCb && successCb(res);\n            })\n            .catch((err) => {\n                dispatch(addStockError(err));\n                dispatch(setMessage(err?.data?.message));\n            });\n    } catch (error) {\n        dispatch(addStockError(error?.message));\n    }\n};\n\nconst getLibraryStock =\n    (searchData = '', page = 1, rowsPerPage = 10) =>\n    (dispatch) => {\n        dispatch(getLibraryStockStart());\n        try {\n            http(\n                process.env.REACT_APP_ROOT_URL_BOOK,\n                'GET',\n                `books-service/books/total?searchKey=${searchData}&pageNumber=${page}&pageSize=${rowsPerPage}`,\n                true\n            )\n                .then((res) => {\n                    const payload = {\n                        libraryStockData: res\n                    };\n                    dispatch(getLibraryStockSuccess(payload));\n                   \n                })\n                .catch((err) => {\n                    dispatch(getLibraryStockError(err));\n                    dispatch(setMessage(err?.message));\n                });\n        } catch (error) {\n            dispatch(getLibraryStockError(error?.message));\n        }\n    };\n\nconst updateLibraryStock = (bookId, quantity, successCb) => (dispatch) => {\n    dispatch(updateLibraryStockStart());\n    try {\n        const isIncrement = quantity >= 0;\n        http(process.env.REACT_APP_ROOT_URL_BOOK, 'PUT', `books-service/books/${bookId}/total/library-stock?quantity=${quantity} `, true)\n            .then((res) => {\n                dispatch(updateLibraryStockSuccess(res));\n                dispatch(setMessage(`${isIncrement ? 'Incremented' : 'Decremented'} successfully`));\n                successCb && successCb(res);\n            })\n            .catch((err) => {\n                dispatch(updateLibraryStockError(err));\n                dispatch(setMessage(err?.data?.message));\n            });\n    } catch (error) {\n        dispatch(updateLibraryStockError(error?.message));\n    }\n};\n\nexport { viewStock,deleteBookFromStok, updateStock, addStock, getLibraryStock, updateLibraryStock };\n"],"sourceRoot":""}